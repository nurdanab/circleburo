import{r as t,j as e}from"./vendor-react-DGsprnG_.js";import{i as n,a as s,t as i,b as o,g as r,n as a,c,p as l,m as u,d as h,K as d,e as p,f,h as m,j as g,k as y,l as v,o as x,q as P,S,r as w,D as T,s as C,u as E,v as A,M as V,w as D,x as M,y as R,J as b,A as L,z as j,B,C as k,E as F,F as I,G as O,H as U,I as W,L as $,N,O as H,P as z,Q as X,R as Y,T as G,U as K,V as Z,W as q,X as J,Y as _,Z as Q,_ as tt,$ as et,a0 as nt,a1 as st,a2 as it,a3 as ot,a4 as rt}from"./vendor-CCnSY37f.js";const at=t.createContext({});function ct(e){const n=t.useRef(null);null===n.current&&(n.current=e());return n.current}const lt="undefined"!=typeof window;const ut=lt?t.useLayoutEffect:t.useEffect;const ht=t.createContext(null);const dt=t.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class pt extends t.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=e.offsetParent;const s=n(t)&&t.offsetWidth||0;const i=this.props.sizeRef.current;i.height=e.offsetHeight||0;i.width=e.offsetWidth||0;i.top=e.offsetTop;i.left=e.offsetLeft;i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ft({children:n,isPresent:s,anchorX:i,root:o}){const r=t.useId();const a=t.useRef(null);const c=t.useRef({width:0,height:0,top:0,left:0,right:0});const{nonce:l}=t.useContext(dt);t.useInsertionEffect(()=>{const{width:t,height:e,top:n,left:u,right:h}=c.current;if(s||!a.current||!t||!e)return;const d="left"===i?`left: ${u}`:`right: ${h}`;a.current.dataset.motionPopId=r;const p=document.createElement("style");l&&(p.nonce=l);const f=o??document.head;f.appendChild(p);p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            ${d}px !important;\n            top: ${n}px !important;\n          }\n        `);return()=>{f.contains(p)&&f.removeChild(p)}},[s]);return e.jsx(pt,{isPresent:s,childRef:a,sizeRef:c,children:t.cloneElement(n,{ref:a})})}const mt=({children:n,initial:s,isPresent:i,onExitComplete:o,custom:r,presenceAffectsLayout:a,mode:c,anchorX:l,root:u})=>{const h=ct(gt);const d=t.useId();let p=!0;let f=t.useMemo(()=>{p=!1;return{id:d,initial:s,isPresent:i,custom:r,onExitComplete:t=>{h.set(t,!0);for(const e of h.values())if(!e)return;o&&o()},register:t=>{h.set(t,!1);return()=>h.delete(t)}}},[i,h,o]);a&&p&&(f={...f});t.useMemo(()=>{h.forEach((t,e)=>h.set(e,!1))},[i]);t.useEffect(()=>{!i&&!h.size&&o&&o()},[i]);"popLayout"===c&&(n=e.jsx(ft,{isPresent:i,anchorX:l,root:u,children:n}));return e.jsx(ht.Provider,{value:f,children:n})};function gt(){return new Map}function yt(e=!0){const n=t.useContext(ht);if(null===n)return[!0,null];const{isPresent:s,onExitComplete:i,register:o}=n;const r=t.useId();t.useEffect(()=>{if(e)return o(r)},[e]);const a=t.useCallback(()=>e&&i&&i(r),[r,i,e]);return!s&&i?[!1,a]:[!0]}const vt=t=>t.key||"";function xt(e){const n=[];t.Children.forEach(e,e=>{t.isValidElement(e)&&n.push(e)});return n}const Pt=({children:n,custom:s,initial:i=!0,onExitComplete:o,presenceAffectsLayout:r=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:u})=>{const[h,d]=yt(c);const p=t.useMemo(()=>xt(n),[n]);const f=c&&!h?[]:p.map(vt);const m=t.useRef(!0);const g=t.useRef(p);const y=ct(()=>new Map);const[v,x]=t.useState(p);const[P,S]=t.useState(p);ut(()=>{m.current=!1;g.current=p;for(let t=0;t<P.length;t++){const e=vt(P[t]);f.includes(e)?y.delete(e):!0!==y.get(e)&&y.set(e,!1)}},[P,f.length,f.join("-")]);const w=[];if(p!==v){let t=[...p];for(let e=0;e<P.length;e++){const n=P[e];const s=vt(n);if(!f.includes(s)){t.splice(e,0,n);w.push(n)}}"wait"===a&&w.length&&(t=w);S(xt(t));x(p);return null}const{forceRender:T}=t.useContext(at);return e.jsx(e.Fragment,{children:P.map(t=>{const n=vt(t);const v=!(c&&!h)&&(p===P||f.includes(n));const x=()=>{if(!y.has(n))return;y.set(n,!0);let t=!0;y.forEach(e=>{e||(t=!1)});if(t){T?.();S(g.current);c&&d?.();o&&o()}};return e.jsx(mt,{isPresent:v,initial:!(m.current&&!i)&&void 0,custom:s,presenceAffectsLayout:r,mode:a,root:u,onExitComplete:v?void 0:x,anchorX:l,children:t},n)})})};const St=t.createContext({strict:!1});const wt={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};const Tt={};for(const gr in wt)Tt[gr]={isEnabled:t=>wt[gr].some(e=>!!t[e])};function Ct(t){for(const e in t)Tt[e]={...Tt[e],...t[e]}}const Et=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function At(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Et.has(t)}let Vt=t=>!At(t);function Dt(t){"function"==typeof t&&(Vt=e=>e.startsWith("on")?!At(e):t(e))}try{Dt(require("@emotion/is-prop-valid").default)}catch{}function Mt(t,e,n){const s={};for(const i in t)"values"===i&&"object"==typeof t.values||(Vt(i)||!0===n&&At(i)||!e&&!At(i)||t["draggable"]&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Rt=t.createContext({});function bt(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}function Lt(t){return"string"==typeof t||Array.isArray(t)}const jt=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"];const Bt=["initial",...jt];function kt(t){return bt(t.animate)||Bt.some(e=>Lt(t[e]))}function Ft(t){return Boolean(kt(t)||t.variants)}function It(t,e){if(kt(t)){const{initial:e,animate:n}=t;return{initial:!1===e||Lt(e)?e:void 0,animate:Lt(n)?n:void 0}}return!1!==t.inherit?e:{}}function Ot(e){const{initial:n,animate:s}=It(e,t.useContext(Rt));return t.useMemo(()=>({initial:n,animate:s}),[Ut(n),Ut(s)])}function Ut(t){return Array.isArray(t)?t.join(" "):t}const Wt={};function $t(t){for(const e in t){Wt[e]=t[e];s(e)&&(Wt[e].isCSSVariable=!0)}}function Nt(t,{layout:e,layoutId:n}){return i.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!Wt[t]||"opacity"===t)}const Ht={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};const zt=o.length;function Xt(t,e,n){let s="";let i=!0;for(let c=0;c<zt;c++){const l=o[c];const u=t[l];if(void 0===u)continue;let h=!0;h="number"==typeof u?u===(l.startsWith("scale")?1:0):0===parseFloat(u);if(!h||n){const t=r(u,a[l]);if(!h){i=!1;s+=`${Ht[l]||l}(${t}) `}n&&(e[l]=t)}}s=s.trim();n?s=n(e,i?"":s):i&&(s="none");return s}function Yt(t,e,n){const{style:o,vars:c,transformOrigin:l}=t;let u=!1;let h=!1;for(const d in e){const t=e[d];if(i.has(d))u=!0;else if(s(d))c[d]=t;else{const e=r(t,a[d]);if(d.startsWith("origin")){h=!0;l[d]=e}else o[d]=e}}e.transform||(u||n?o.transform=Xt(e,t.transform,n):o.transform&&(o.transform="none"));if(h){const{originX:t="50%",originY:e="50%",originZ:n=0}=l;o.transformOrigin=`${t} ${e} ${n}`}}const Gt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Kt(t,e,n){for(const s in e)c(e[s])||Nt(s,n)||(t[s]=e[s])}function Zt({transformTemplate:e},n){return t.useMemo(()=>{const t=Gt();Yt(t,n,e);return Object.assign({},t.vars,t.style)},[n])}function qt(t,e){const n={};Kt(n,t.style||{},t);Object.assign(n,Zt(t,e));return n}function Jt(t,e){const n={};const s=qt(t,e);if(t.drag&&!1!==t.dragListener){n.draggable=!1;s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none";s.touchAction=!0===t.drag?"none":`pan-${"x"===t.drag?"y":"x"}`}void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0);n.style=s;return n}const _t={offset:"stroke-dashoffset",array:"stroke-dasharray"};const Qt={offset:"strokeDashoffset",array:"strokeDasharray"};function te(t,e,n=1,s=0,i=!0){t.pathLength=1;const o=i?_t:Qt;t[o.offset]=l.transform(-s);const r=l.transform(e);const a=l.transform(n);t[o.array]=`${r} ${a}`}function ee(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:o=1,pathOffset:r=0,...a},c,l,u){Yt(t,a,l);if(c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style;t.style={};const{attrs:h,style:d}=t;if(h.transform){d.transform=h.transform;delete h.transform}if(d.transform||h.transformOrigin){d.transformOrigin=h.transformOrigin??"50% 50%";delete h.transformOrigin}if(d.transform){d.transformBox=u?.transformBox??"fill-box";delete h.transformBox}void 0!==e&&(h.x=e);void 0!==n&&(h.y=n);void 0!==s&&(h.scale=s);void 0!==i&&te(h,i,o,r,!1)}const ne=()=>({...Gt(),attrs:{}});const se=t=>"string"==typeof t&&"svg"===t.toLowerCase();function ie(e,n,s,i){const o=t.useMemo(()=>{const t=ne();ee(t,n,se(i),e.transformTemplate,e.style);return{...t.attrs,style:{...t.style}}},[n]);if(e.style){const t={};Kt(t,e.style,e);o.style={...t,...o.style}}return o}const oe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function re(t){return"string"==typeof t&&!t.includes("-")&&!!(oe.indexOf(t)>-1||/[A-Z]/u.test(t))}function ae(e,n,s,{latestValues:i},o,r=!1){const a=(re(e)?ie:Jt)(n,i,o,e);const l=Mt(n,"string"==typeof e,r);const u=e!==t.Fragment?{...l,...a,ref:s}:{};const{children:h}=n;const d=t.useMemo(()=>c(h)?h.get():h,[h]);return t.createElement(e,{...u,children:d})}function ce(t){const e=[{},{}];t?.values.forEach((t,n)=>{e[0][n]=t.get();e[1][n]=t.getVelocity()});return e}function le(t,e,n,s){if("function"==typeof e){const[i,o]=ce(s);e=e(void 0!==n?n:t.custom,i,o)}"string"==typeof e&&(e=t.variants&&t.variants[e]);if("function"==typeof e){const[i,o]=ce(s);e=e(void 0!==n?n:t.custom,i,o)}return e}function ue(t){return c(t)?t.get():t}function he({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:de(n,s,i,t),renderState:e()}}function de(t,e,n,s){const i={};const o=s(t,{});for(const d in o)i[d]=ue(o[d]);let{initial:r,animate:a}=t;const c=kt(t);const l=Ft(t);if(e&&l&&!c&&!1!==t.inherit){void 0===r&&(r=e.initial);void 0===a&&(a=e.animate)}let u=!!n&&!1===n.initial;u=u||!1===r;const h=u?a:r;if(h&&"boolean"!=typeof h&&!bt(h)){const e=Array.isArray(h)?h:[h];for(let n=0;n<e.length;n++){const s=le(t,e[n]);if(s){const{transitionEnd:t,transition:e,...n}=s;for(const s in n){let t=n[s];Array.isArray(t)&&(t=t[u?t.length-1:0]);null!==t&&(i[s]=t)}for(const s in t)i[s]=t[s]}}}return i}const pe=e=>(n,s)=>{const i=t.useContext(Rt);const o=t.useContext(ht);const r=()=>he(e,n,i,o);return s?r():ct(r)};function fe(t,e,n){const{style:s}=t;const i={};for(const o in s)(c(s[o])||e.style&&c(e.style[o])||Nt(o,t)||void 0!==n?.getValue(o)?.liveStyle)&&(i[o]=s[o]);return i}const me=pe({scrapeMotionValuesFromProps:fe,createRenderState:Gt});function ge(t,e,n){const s=fe(t,e,n);for(const i in t)(c(t[i])||c(e[i]))&&(s[-1!==o.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]);return s}const ye=pe({scrapeMotionValuesFromProps:ge,createRenderState:ne});const ve=Symbol.for("motionComponentSymbol");function xe(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function Pe(e,n,s){return t.useCallback(t=>{t&&e.onMount&&e.onMount(t);n&&(t?n.mount(t):n.unmount());s&&("function"==typeof s?s(t):xe(s)&&(s.current=t))},[n])}const Se=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase();const we="data-"+Se("framerAppearId");const Te=t.createContext({});function Ce(e,n,s,i,o){const{visualElement:r}=t.useContext(Rt);const a=t.useContext(St);const c=t.useContext(ht);const l=t.useContext(dt).reducedMotion;const u=t.useRef(null);i=i||a.renderer;!u.current&&i&&(u.current=i(e,{visualState:n,parent:r,props:s,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:l}));const h=u.current;const d=t.useContext(Te);!h||h.projection||!o||"html"!==h.type&&"svg"!==h.type||Ee(u.current,s,o,d);const p=t.useRef(!1);t.useInsertionEffect(()=>{h&&p.current&&h.update(s,c)});const f=s[we];const m=t.useRef(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));ut(()=>{if(h){p.current=!0;window.MotionIsMounted=!0;h.updateFeatures();h.scheduleRenderMicrotask();m.current&&h.animationState&&h.animationState.animateChanges()}});t.useEffect(()=>{if(h){!m.current&&h.animationState&&h.animationState.animateChanges();if(m.current){queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)});m.current=!1}h.enteringChildren=void 0}});return h}function Ee(t,e,n,s){const{layoutId:i,layout:o,drag:r,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Ae(t.parent));t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(r)||a&&xe(a),visualElement:t,animationType:"string"==typeof o?o:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:c,layoutRoot:l})}function Ae(t){if(t)return!1!==t.options.allowProjection?t.projection:Ae(t.parent)}function Ve(n,{forwardMotionProps:s=!1}={},i,o){i&&Ct(i);const r=re(n)?ye:me;function a(i,a){let c;const l={...t.useContext(dt),...i,layoutId:De(i)};const{isStatic:u}=l;const h=Ot(i);const d=r(i,u);if(!u&&lt){Me();const t=Re(l);c=t.MeasureLayout;h.visualElement=Ce(n,d,l,o,t.ProjectionNode)}return e.jsxs(Rt.Provider,{value:h,children:[c&&h.visualElement?e.jsx(c,{visualElement:h.visualElement,...l}):null,ae(n,i,Pe(d,h.visualElement,a),d,u,s)]})}a.displayName=`motion.${"string"==typeof n?n:`create(${n.displayName??n.name??""})`}`;const c=t.forwardRef(a);c[ve]=n;return c}function De({layoutId:e}){const n=t.useContext(at).id;return n&&void 0!==e?n+"-"+e:e}function Me(e,n){t.useContext(St).strict}function Re(t){const{drag:e,layout:n}=Tt;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function be(t,e){if("undefined"==typeof Proxy)return Ve;const n=new Map;const s=(n,s)=>Ve(n,s,t,e);return new Proxy((t,e)=>s(t,e),{get:(i,o)=>{if("create"===o)return s;n.has(o)||n.set(o,Ve(o,void 0,t,e));return n.get(o)}})}function Le({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function je({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Be(t,e){if(!e)return t;const n=e({x:t.left,y:t.top});const s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function ke(t){return void 0===t||1===t}function Fe({scale:t,scaleX:e,scaleY:n}){return!ke(t)||!ke(e)||!ke(n)}function Ie(t){return Fe(t)||Oe(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Oe(t){return Ue(t.x)||Ue(t.y)}function Ue(t){return t&&"0%"!==t}function We(t,e,n){return n+e*(t-n)}function $e(t,e,n,s,i){void 0!==i&&(t=We(t,i,s));return We(t,n,s)+e}function Ne(t,e=0,n=1,s,i){t.min=$e(t.min,e,n,s,i);t.max=$e(t.max,e,n,s,i)}function He(t,{x:e,y:n}){Ne(t.x,e.translate,e.scale,e.originPoint);Ne(t.y,n.translate,n.scale,n.originPoint)}const ze=.999999999999;const Xe=1.0000000000001;function Ye(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o;let r;for(let a=0;a<i;a++){o=n[a];r=o.projectionDelta;const{visualElement:i}=o.options;if(!i||!i.props.style||"contents"!==i.props.style.display){s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ze(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y});if(r){e.x*=r.x.scale;e.y*=r.y.scale;He(t,r)}s&&Ie(o.latestValues)&&Ze(t,o.latestValues)}}e.x<Xe&&e.x>ze&&(e.x=1);e.y<Xe&&e.y>ze&&(e.y=1)}function Ge(t,e){t.min=t.min+e;t.max=t.max+e}function Ke(t,e,n,s,i=.5){Ne(t,e,n,u(t.min,t.max,i),s)}function Ze(t,e){Ke(t.x,e.x,e.scaleX,e.scale,e.originX);Ke(t.y,e.y,e.scaleY,e.scale,e.originY)}function qe(t,e){return Le(Be(t.getBoundingClientRect(),e))}function Je(t,e,n){const s=qe(t,n);const{scroll:i}=e;if(i){Ge(s.x,i.offset.x);Ge(s.y,i.offset.y)}return s}const _e=()=>({translate:0,scale:1,origin:0,originPoint:0});const Qe=()=>({x:_e(),y:_e()});const tn=()=>({min:0,max:0});const en=()=>({x:tn(),y:tn()});const nn={current:null};const sn={current:!1};function on(){sn.current=!0;if(lt)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)");const e=()=>nn.current=t.matches;t.addEventListener("change",e);e()}else nn.current=!1}const rn=new WeakMap;function an(t,e,n){for(const s in e){const i=e[s];const o=n[s];if(c(i))t.addValue(s,i);else if(c(o))t.addValue(s,h(i,{owner:t}));else if(o!==i)if(t.hasValue(s)){const e=t.getValue(s);!0===e.liveStyle?e.jump(i):e.hasAnimated||e.set(i)}else{const e=t.getStaticValue(s);t.addValue(s,h(void 0!==e?e:i,{owner:t}))}}for(const s in n)void 0===e[s]&&t.removeValue(s);return e}const cn=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ln{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},r={}){this.current=null;this.children=new Set;this.isVariantNode=!1;this.isControllingVariants=!1;this.shouldReduceMotion=null;this.values=new Map;this.KeyframeResolver=d;this.features={};this.valueSubscriptions=new Map;this.prevMotionValues={};this.events={};this.propEventSubscriptions={};this.notifyUpdate=()=>this.notify("Update",this.latestValues);this.render=()=>{if(this.current){this.triggerBuild();this.renderInstance(this.current,this.renderState,this.props.style,this.projection)}};this.renderScheduledAt=0;this.scheduleRender=()=>{const t=p.now();if(this.renderScheduledAt<t){this.renderScheduledAt=t;f.render(this.render,!1,!0)}};const{latestValues:a,renderState:l}=o;this.latestValues=a;this.baseTarget={...a};this.initialValues=e.initial?{...a}:{};this.renderState=l;this.parent=t;this.props=e;this.presenceContext=n;this.depth=t?t.depth+1:0;this.reducedMotionConfig=s;this.options=r;this.blockInitialAnimation=Boolean(i);this.isControllingVariants=kt(e);this.isVariantNode=Ft(e);this.isVariantNode&&(this.variantChildren=new Set);this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(e,{},this);for(const d in h){const t=h[d];void 0!==a[d]&&c(t)&&t.set(a[d])}}mount(t){this.current=t;rn.set(t,this);this.projection&&!this.projection.instance&&this.projection.mount(t);this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this));this.values.forEach((t,e)=>this.bindToMotionValue(e,t));sn.current||on();this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||nn.current);this.parent?.addChild(this);this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount();m(this.notifyUpdate);m(this.render);this.valueSubscriptions.forEach(t=>t());this.valueSubscriptions.clear();this.removeFromVariantTree&&this.removeFromVariantTree();this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];if(e){e.unmount();e.isMounted=!1}}this.current=null}addChild(t){this.children.add(t);this.enteringChildren??(this.enteringChildren=new Set);this.enteringChildren.add(t)}removeChild(t){this.children.delete(t);this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=i.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",e=>{this.latestValues[t]=e;this.props.onUpdate&&f.preRender(this.notifyUpdate);n&&this.projection&&(this.projection.isTransformDirty=!0);this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e));this.valueSubscriptions.set(t,()=>{s();o&&o();e.owner&&e.stop()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in Tt){const e=Tt[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this));if(this.features[t]){const e=this.features[t];if(e.isMounted)e.update();else{e.mount();e.isMounted=!0}}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender();this.prevProps=this.props;this.props=t;this.prevPresenceContext=this.presenceContext;this.presenceContext=e;for(let n=0;n<cn.length;n++){const e=cn[n];if(this.propEventSubscriptions[e]){this.propEventSubscriptions[e]();delete this.propEventSubscriptions[e]}const s=t["on"+e];s&&(this.propEventSubscriptions[e]=this.on(e,s))}this.prevMotionValues=an(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues);this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e){e.variantChildren&&e.variantChildren.add(t);return()=>e.variantChildren.delete(t)}}addValue(t,e){const n=this.values.get(t);if(e!==n){n&&this.removeValue(t);this.bindToMotionValue(t,e);this.values.set(t,e);this.latestValues[t]=e.get()}}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);if(e){e();this.valueSubscriptions.delete(t)}delete this.latestValues[t];this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);if(void 0===n&&void 0!==e){n=h(null===e?void 0:e,{owner:this});this.addValue(t,n)}return n}readValue(t,e){let n=void 0===this.latestValues[t]&&this.current?this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];if(null!=n){"string"==typeof n&&(g(n)||y(n))?n=parseFloat(n):!v(n)&&x.test(e)&&(n=P(t,e));this.setBaseTarget(t,c(n)?n.get():n)}return c(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if("string"==typeof e||"object"==typeof e){const s=le(this.props,e,this.presenceContext?.custom);s&&(n=s[t])}if(e&&void 0!==n)return n;const s=this.getBaseTargetFromProps(this.props,t);return void 0===s||c(s)?void 0!==this.initialValues[t]&&void 0===n?void 0:this.baseTarget[t]:s}on(t,e){this.events[t]||(this.events[t]=new S);return this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){w.render(this.render)}}class un extends ln{constructor(){super(...arguments);this.KeyframeResolver=T}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t];delete n[t]}handleChildMotionValue(){if(this.childSubscription){this.childSubscription();delete this.childSubscription}const{children:t}=this.props;c(t)&&(this.childSubscription=t.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function hn(t,{style:e,vars:n},s,i){const o=t.style;let r;for(r in e)o[r]=e[r];i?.applyProjectionStyles(o,s);for(r in n)o.setProperty(r,n[r])}function dn(t){return window.getComputedStyle(t)}class pn extends un{constructor(){super(...arguments);this.type="html";this.renderInstance=hn}readValueFromInstance(t,e){if(i.has(e))return this.projection?.isProjecting?C(e):E(t,e);{const n=dn(t);const i=(s(e)?n.getPropertyValue(e):n[e])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return qe(t,e)}build(t,e,n){Yt(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return fe(t,e,n)}}const fn=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mn(t,e,n,s){hn(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(fn.has(i)?i:Se(i),e.attrs[i])}class gn extends un{constructor(){super(...arguments);this.type="svg";this.isSVGTag=!1;this.measureInstanceViewportBox=en}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(i.has(e)){const t=A(e);return t&&t.default||0}e=fn.has(e)?e:Se(e);return t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return ge(t,e,n)}build(t,e,n){ee(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){mn(t,e,n,s)}mount(t){this.isSVGTag=se(t.tagName);super.mount(t)}}const yn=(e,n)=>re(e)?new gn(n):new pn(n,{allowProjection:e!==t.Fragment});function vn(t,e,n){const s=t.getProps();return le(s,e,void 0!==n?n:s.custom,t)}const xn=t=>Array.isArray(t);function Pn(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,h(n))}function Sn(t){return xn(t)?t[t.length-1]||0:t}function wn(t,e){const n=vn(t,e);let{transitionEnd:s={},transition:i={},...o}=n||{};o={...o,...s};for(const r in o)Pn(t,r,Sn(o[r]))}function Tn(t){return Boolean(c(t)&&t.add)}function Cn(t,e){const n=t.getValue("willChange");if(Tn(n))return n.add(e);if(!n&&V.WillChange){const n=new V.WillChange("auto");t.addValue("willChange",n);n.add(e)}}function En(t){return t.props[we]}const An=t=>null!==t;function Vn(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(An);return i[e&&"loop"!==n&&e%2==1?0:i.length-1]}const Dn={type:"spring",stiffness:500,damping:25,restSpeed:10};const Mn=t=>({type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restSpeed:10});const Rn={type:"keyframes",duration:.8};const bn={type:"keyframes",ease:[.25,.1,.35,1],duration:.3};const Ln=(t,{keyframes:e})=>e.length>2?Rn:i.has(t)?t.startsWith("scale")?Mn(e[1]):Dn:bn;function jn({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:r,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const Bn=(t,e,n,s={},i,o)=>r=>{const a=D(s,t)||{};const c=a.delay||s.delay||0;let{elapsed:l=0}=s;l-=M(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:t=>{e.set(t);a.onUpdate&&a.onUpdate(t)},onComplete:()=>{r();a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:i};jn(a)||Object.assign(u,Ln(t,u));u.duration&&(u.duration=M(u.duration));u.repeatDelay&&(u.repeatDelay=M(u.repeatDelay));void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if(!1===u.type||0===u.duration&&!u.repeatDelay){R(u);0===u.delay&&(h=!0)}if(V.instantAnimations||V.skipAnimations){h=!0;R(u);u.delay=0}u.allowFlatten=!a.type&&!a.ease;if(h&&!o&&void 0!==e.get()){const t=Vn(u.keyframes,a);if(void 0!==t){f.update(()=>{u.onUpdate(t);u.onComplete()});return}}return a.isSync?new b(u):new L(u)};function kn({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&!0!==e[n];e[n]=!1;return s}function Fn(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:r,...a}=e;s&&(o=s);const c=[];const l=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const e=t.getValue(u,t.latestValues[u]??null);const s=a[u];if(void 0===s||l&&kn(l,u))continue;const i={delay:n,...D(o||{},u)};const r=e.get();if(void 0!==r&&!e.isAnimating&&!Array.isArray(s)&&s===r&&!i.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const e=En(t);if(e){const t=window.MotionHandoffAnimation(e,u,f);if(null!==t){i.startTime=t;h=!0}}}Cn(t,u);e.start(Bn(u,e,s,t.shouldReduceMotion&&j.has(u)?{type:!1}:i,t,h));const d=e.animation;d&&c.push(d)}r&&Promise.all(c).then(()=>{f.update(()=>{r&&wn(t,r)})});return c}function In(t,e,n,s=0,i=1){const o=Array.from(t).sort((t,e)=>t.sortNodePosition(e)).indexOf(e);const r=t.size;const a=(r-1)*s;return"function"==typeof n?n(o,r):1===i?o*s:a-o*s}function On(t,e,n={}){const s=vn(t,e,"exit"===n.type?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(Fn(t,s,n)):()=>Promise.resolve();const r=t.variantChildren&&t.variantChildren.size?(s=0)=>{const{delayChildren:o=0,staggerChildren:r,staggerDirection:a}=i;return Un(t,e,s,o,r,a,n)}:()=>Promise.resolve();const{when:a}=i;if(a){const[t,e]="beforeChildren"===a?[o,r]:[r,o];return t().then(()=>e())}return Promise.all([o(),r(n.delay)])}function Un(t,e,n=0,s=0,i=0,o=1,r){const a=[];for(const c of t.variantChildren){c.notify("AnimationStart",e);a.push(On(c,e,{...r,delay:n+("function"==typeof s?0:s)+In(t.variantChildren,c,s,i,o)}).then(()=>c.notify("AnimationComplete",e)))}return Promise.all(a)}function Wn(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(e=>On(t,e,n));s=Promise.all(i)}else if("string"==typeof e)s=On(t,e,n);else{const i="function"==typeof e?vn(t,e,n.custom):e;s=Promise.all(Fn(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function $n(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Nn=Bt.length;function Hn(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&Hn(t.parent)||{};void 0!==t.props.initial&&(e.initial=t.props.initial);return e}const e={};for(let n=0;n<Nn;n++){const s=Bt[n];const i=t.props[s];(Lt(i)||!1===i)&&(e[s]=i)}return e}const zn=[...jt].reverse();const Xn=jt.length;function Yn(t){return e=>Promise.all(e.map(({animation:e,options:n})=>Wn(t,e,n)))}function Gn(t){let e=Yn(t);let n=qn();let s=!0;const i=e=>(n,s)=>{const i=vn(t,s,"exit"===e?t.presenceContext?.custom:void 0);if(i){const{transition:t,transitionEnd:e,...s}=i;n={...n,...s,...e}}return n};function o(n){e=n(t)}function r(o){const{props:r}=t;const a=Hn(t.parent)||{};const c=[];const l=new Set;let u={};let h=1/0;for(let e=0;e<Xn;e++){const d=zn[e];const p=n[d];const f=void 0!==r[d]?r[d]:a[d];const m=Lt(f);const g=d===o?p.isActive:null;!1===g&&(h=e);let y=f===a[d]&&f!==r[d]&&m;y&&s&&t.manuallyAnimateOnMount&&(y=!1);p.protectedKeys={...u};if(!p.isActive&&null===g||!f&&!p.prevProp||bt(f)||"boolean"==typeof f)continue;const v=Kn(p.prevProp,f);let x=v||d===o&&p.isActive&&!y&&m||e>h&&m;let P=!1;const S=Array.isArray(f)?f:[f];let w=S.reduce(i(d),{});!1===g&&(w={});const{prevResolvedValues:T={}}=p;const C={...T,...w};const E=e=>{x=!0;if(l.has(e)){P=!0;l.delete(e)}p.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in C){const e=w[t];const n=T[t];if(u.hasOwnProperty(t))continue;let s=!1;s=xn(e)&&xn(n)?!$n(e,n):e!==n;s?null!=e?E(t):l.add(t):void 0!==e&&l.has(t)?E(t):p.protectedKeys[t]=!0}p.prevProp=f;p.prevResolvedValues=w;p.isActive&&(u={...u,...w});s&&t.blockInitialAnimation&&(x=!1);const A=y&&v;x&&(!A||P)&&c.push(...S.map(e=>{const n={type:d};if("string"==typeof e&&s&&!A&&t.manuallyAnimateOnMount&&t.parent){const{parent:s}=t;const i=vn(s,e);if(s.enteringChildren&&i){const{delayChildren:e}=i.transition||{};n.delay=In(s.enteringChildren,t,e)}}return{animation:e,options:n}}))}if(l.size){const e={};if("boolean"!=typeof r.initial){const n=vn(t,Array.isArray(r.initial)?r.initial[0]:r.initial);n&&n.transition&&(e.transition=n.transition)}l.forEach(n=>{const s=t.getBaseTarget(n);const i=t.getValue(n);i&&(i.liveStyle=!0);e[n]=s??null});c.push({animation:e})}let d=Boolean(c.length);!s||!1!==r.initial&&r.initial!==r.animate||t.manuallyAnimateOnMount||(d=!1);s=!1;return d?e(c):Promise.resolve()}function a(e,s){if(n[e].isActive===s)return Promise.resolve();t.variantChildren?.forEach(t=>t.animationState?.setActive(e,s));n[e].isActive=s;const i=r(e);for(const t in n)n[t].protectedKeys={};return i}return{animateChanges:r,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=qn();s=!0}}}function Kn(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!$n(e,t)}function Zn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qn(){return{animate:Zn(!0),whileInView:Zn(),whileHover:Zn(),whileTap:Zn(),whileDrag:Zn(),whileFocus:Zn(),exit:Zn()}}class Jn{constructor(t){this.isMounted=!1;this.node=t}update(){}}class _n extends Jn{constructor(t){super(t);t.animationState||(t.animationState=Gn(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();bt(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps();const{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset();this.unmountControls?.()}}let Qn=0;class ts extends Jn{constructor(){super(...arguments);this.id=Qn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext;const{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id);t&&(this.unmount=t(this.id))}unmount(){}}const es={animation:{Feature:_n},exit:{Feature:ts}};function ns(t,e,n,s={passive:!0}){t.addEventListener(e,n,s);return()=>t.removeEventListener(e,n)}function ss(t){return{point:{x:t.pageX,y:t.pageY}}}const is=t=>e=>B(e)&&t(e,ss(e));function os(t,e,n,s){return ns(t,e,is(n),s)}const rs=1e-4;const as=1-rs;const cs=1+rs;const ls=.01;const us=0-ls;const hs=0+ls;function ds(t){return t.max-t.min}function ps(t,e,n){return Math.abs(t-e)<=n}function fs(t,e,n,s=.5){t.origin=s;t.originPoint=u(e.min,e.max,t.origin);t.scale=ds(n)/ds(e);t.translate=u(n.min,n.max,t.origin)-t.originPoint;(t.scale>=as&&t.scale<=cs||isNaN(t.scale))&&(t.scale=1);(t.translate>=us&&t.translate<=hs||isNaN(t.translate))&&(t.translate=0)}function ms(t,e,n,s){fs(t.x,e.x,n.x,s?s.originX:void 0);fs(t.y,e.y,n.y,s?s.originY:void 0)}function gs(t,e,n){t.min=n.min+e.min;t.max=t.min+ds(e)}function ys(t,e,n){gs(t.x,e.x,n.x);gs(t.y,e.y,n.y)}function vs(t,e,n){t.min=e.min-n.min;t.max=t.min+ds(e)}function xs(t,e,n){vs(t.x,e.x,n.x);vs(t.y,e.y,n.y)}function Ps(t){return[t("x"),t("y")]}const Ss=({current:t})=>t?t.ownerDocument.defaultView:null;const ws=(t,e)=>Math.abs(t-e);function Ts(t,e){const n=ws(t.x,e.x);const s=ws(t.y,e.y);return Math.sqrt(n**2+s**2)}class Cs{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){this.startEvent=null;this.lastMoveEvent=null;this.lastMoveEventInfo=null;this.handlers={};this.contextWindow=window;this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Vs(this.lastMoveEventInfo,this.history);const e=null!==this.startEvent;const n=Ts(t.offset,{x:0,y:0})>=this.distanceThreshold;if(!e&&!n)return;const{point:s}=t;const{timestamp:i}=k;this.history.push({...s,timestamp:i});const{onStart:o,onMove:r}=this.handlers;if(!e){o&&o(this.lastMoveEvent,t);this.startEvent=this.lastMoveEvent}r&&r(this.lastMoveEvent,t)};this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t;this.lastMoveEventInfo=Es(e,this.transformPagePoint);f.update(this.updatePoint,!0)};this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:i}=this.handlers;this.dragSnapToOrigin&&i&&i();if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Vs("pointercancel"===t.type?this.lastMoveEventInfo:Es(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,o);s&&s(t,o)};if(!B(t))return;this.dragSnapToOrigin=i;this.handlers=e;this.transformPagePoint=n;this.distanceThreshold=o;this.contextWindow=s||window;const r=Es(ss(t),this.transformPagePoint);const{point:a}=r;const{timestamp:c}=k;this.history=[{...a,timestamp:c}];const{onSessionStart:l}=e;l&&l(t,Vs(r,this.history));this.removeListeners=F(os(this.contextWindow,"pointermove",this.handlePointerMove),os(this.contextWindow,"pointerup",this.handlePointerUp),os(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners();m(this.updatePoint)}}function Es(t,e){return e?{point:e(t.point)}:t}function As(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vs({point:t},e){return{point:t,delta:As(t,Ms(e)),offset:As(t,Ds(e)),velocity:Rs(e,.1)}}function Ds(t){return t[0]}function Ms(t){return t[t.length-1]}function Rs(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1;let s=null;const i=Ms(t);for(;n>=0;){s=t[n];if(i.timestamp-s.timestamp>M(e))break;n--}if(!s)return{x:0,y:0};const o=I(i.timestamp-s.timestamp);if(0===o)return{x:0,y:0};const r={x:(i.x-s.x)/o,y:(i.y-s.y)/o};r.x===1/0&&(r.x=0);r.y===1/0&&(r.y=0);return r}function bs(t,{min:e,max:n},s){void 0!==e&&t<e?t=s?u(e,t,s.min):Math.max(t,e):void 0!==n&&t>n&&(t=s?u(n,t,s.max):Math.min(t,n));return t}function Ls(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function js(t,{top:e,left:n,bottom:s,right:i}){return{x:Ls(t.x,n,i),y:Ls(t.y,e,s)}}function Bs(t,e){let n=e.min-t.min;let s=e.max-t.max;e.max-e.min<t.max-t.min&&([n,s]=[s,n]);return{min:n,max:s}}function ks(t,e){return{x:Bs(t.x,e.x),y:Bs(t.y,e.y)}}function Fs(t,e){let n=.5;const s=ds(t);const i=ds(e);i>s?n=O(e.min,e.max-s,t.min):s>i&&(n=O(t.min,t.max-i,e.min));return U(0,1,n)}function Is(t,e){const n={};void 0!==e.min&&(n.min=e.min-t.min);void 0!==e.max&&(n.max=e.max-t.min);return n}const Os=.35;function Us(t=Os){!1===t?t=0:!0===t&&(t=Os);return{x:Ws(t,"left","right"),y:Ws(t,"top","bottom")}}function Ws(t,e,n){return{min:$s(t,e),max:$s(t,n)}}function $s(t,e){return"number"==typeof t?t:t[e]||0}const Ns=new WeakMap;class Hs{constructor(t){this.openDragLock=null;this.isDragging=!1;this.currentDirection=null;this.originPoint={x:0,y:0};this.constraints=!1;this.hasMutatedConstraints=!1;this.elastic=en();this.latestPointerEvent=null;this.latestPanInfo=null;this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;const i=t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation();e&&this.snapToCursor(ss(t).point)};const o=(t,e)=>{const{drag:n,dragPropagation:s,onDragStart:i}=this.getProps();if(n&&!s){this.openDragLock&&this.openDragLock();this.openDragLock=W(n);if(!this.openDragLock)return}this.latestPointerEvent=t;this.latestPanInfo=e;this.isDragging=!0;this.currentDirection=null;this.resolveConstraints();if(this.visualElement.projection){this.visualElement.projection.isAnimationBlocked=!0;this.visualElement.projection.target=void 0}Ps(t=>{let e=this.getAxisMotionValue(t).get()||0;if($.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[t];s&&(e=ds(s)*(parseFloat(e)/100))}}this.originPoint[t]=e});i&&f.postRender(()=>i(t,e));Cn(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)};const r=(t,e)=>{this.latestPointerEvent=t;this.latestPanInfo=e;const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:r}=e;if(s&&null===this.currentDirection){this.currentDirection=Xs(r);null!==this.currentDirection&&i&&i(this.currentDirection)}else{this.updateAxis("x",e.point,r);this.updateAxis("y",e.point,r);this.visualElement.render();o&&o(t,e)}};const a=(t,e)=>{this.latestPointerEvent=t;this.latestPanInfo=e;this.stop(t,e);this.latestPointerEvent=null;this.latestPanInfo=null};const c=()=>Ps(t=>"paused"===this.getAnimationState(t)&&this.getAxisMotionValue(t).animation?.play());const{dragSnapToOrigin:l}=this.getProps();this.panSession=new Cs(t,{onSessionStart:i,onStart:o,onMove:r,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:n,contextWindow:Ss(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent;const s=e||this.latestPanInfo;const i=this.isDragging;this.cancel();if(!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:r}=this.getProps();r&&f.postRender(()=>r(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1);this.panSession&&this.panSession.end();this.panSession=void 0;const{dragPropagation:n}=this.getProps();if(!n&&this.openDragLock){this.openDragLock();this.openDragLock=null}e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!zs(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=bs(o,this.constraints[t],this.elastic[t]));i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps();const n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout;const s=this.constraints;t&&xe(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&js(n.layoutBox,t);this.elastic=Us(e);s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ps(t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=Is(n.layoutBox[t],this.constraints[t]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!xe(t))return!1;const n=t.current;const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Je(n,s.root,this.visualElement.getTransformPagePoint());let o=ks(s.layout.layoutBox,i);if(e){const t=e(je(o));this.hasMutatedConstraints=!!t;t&&(o=Le(t))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:r}=this.getProps();const a=this.constraints||{};const c=Ps(r=>{if(!zs(r,e,this.currentDirection))return;let c=a&&a[r]||{};o&&(c={min:0,max:0});const l=s?200:1e6;const u=s?40:1e7;const h={type:"inertia",velocity:n?t[r]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(r,h)});return Promise.all(c).then(r)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);Cn(this.visualElement,t);return n.start(Bn(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ps(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ps(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`;const n=this.visualElement.getProps();return n[e]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ps(e=>{const{drag:n}=this.getProps();if(!zs(e,n,this.currentDirection))return;const{projection:s}=this.visualElement;const i=this.getAxisMotionValue(e);if(s&&s.layout){const{min:n,max:o}=s.layout.layoutBox[e];i.set(t[e]-u(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps();const{projection:n}=this.visualElement;if(!xe(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ps(t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();s[t]=Fs({min:n,max:n},this.constraints[t])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none";n.root&&n.root.updateScroll();n.updateLayout();this.resolveConstraints();Ps(e=>{if(!zs(e,t,null))return;const n=this.getAxisMotionValue(e);const{min:i,max:o}=this.constraints[e];n.set(u(i,o,s[e]))})}addListeners(){if(!this.visualElement.current)return;Ns.set(this.visualElement,this);const t=os(this.visualElement.current,"pointerdown",t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)});const e=()=>{const{dragConstraints:t}=this.getProps();xe(t)&&t.current&&(this.constraints=this.resolveRefConstraints())};const{projection:n}=this.visualElement;const s=n.addEventListener("measure",e);if(n&&!n.layout){n.root&&n.root.updateScroll();n.updateLayout()}f.read(e);const i=ns(window,"resize",()=>this.scalePositionWithinConstraints());const o=n.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e})=>{if(this.isDragging&&e){Ps(e=>{const n=this.getAxisMotionValue(e);if(n){this.originPoint[e]+=t[e].translate;n.set(n.get()+t[e].translate)}});this.visualElement.render()}});return()=>{i();t();s();o&&o()}}getProps(){const t=this.visualElement.getProps();const{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Os,dragMomentum:r=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:r}}}function zs(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}function Xs(t,e=10){let n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}class Ys extends Jn{constructor(t){super(t);this.removeGroupControls=N;this.removeListeners=N;this.controls=new Hs(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls));this.removeListeners=this.controls.addListeners()||N}unmount(){this.removeGroupControls();this.removeListeners()}}const Gs=t=>(e,n)=>{t&&f.postRender(()=>t(e,n))};class Ks extends Jn{constructor(){super(...arguments);this.removePointerDownListener=N}onPointerDown(t){this.session=new Cs(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ss(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Gs(t),onStart:Gs(e),onMove:n,onEnd:(t,e)=>{delete this.session;s&&f.postRender(()=>s(t,e))}}}mount(){this.removePointerDownListener=os(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener();this.session&&this.session.end()}}const Zs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qs(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Js={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!l.test(t))return t;t=parseFloat(t)}return`${qs(t,e.target.x)}% ${qs(t,e.target.y)}%`}};const _s={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t;const i=x.parse(t);if(i.length>5)return s;const o=x.createTransformer(t);const r="number"!=typeof i[0]?1:0;const a=n.x.scale*e.x;const c=n.y.scale*e.y;i[0+r]/=a;i[1+r]/=c;const l=u(a,c,.5);"number"==typeof i[2+r]&&(i[2+r]/=l);"number"==typeof i[3+r]&&(i[3+r]/=l);return o(i)}};let Qs=!1;class ti extends t.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props;const{projection:i}=t;$t(ni);if(i){e.group&&e.group.add(i);n&&n.register&&s&&n.register(i);Qs&&i.root.didUpdate();i.addEventListener("animationComplete",()=>{this.safeToRemove()});i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})}Zs.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:i}=this.props;const{projection:o}=n;if(!o)return null;o.isPresent=i;Qs=!0;s||t.layoutDependency!==e||void 0===e||t.isPresent!==i?o.willUpdate():this.safeToRemove();t.isPresent!==i&&(i?o.promote():o.relegate()||f.postRender(()=>{const t=o.getStack();t&&t.members.length||this.safeToRemove()}));return null}componentDidUpdate(){const{projection:t}=this.props.visualElement;if(t){t.root.didUpdate();w.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})}}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props;const{projection:s}=t;Qs=!0;if(s){s.scheduleCheckAfterUnmount();e&&e.group&&e.group.remove(s);n&&n.deregister&&n.deregister(s)}}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ei(n){const[s,i]=yt();const o=t.useContext(at);return e.jsx(ti,{...n,layoutGroup:o,switchLayoutGroup:t.useContext(Te),isPresent:s,safeToRemove:i})}const ni={borderRadius:{...Js,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Js,borderTopRightRadius:Js,borderBottomLeftRadius:Js,borderBottomRightRadius:Js,boxShadow:_s};function si(t,e,n){const s=c(t)?t:h(t);s.start(Bn("",s,e,n));return s.animation}const ii=(t,e)=>t.depth-e.depth;class oi{constructor(){this.children=[];this.isDirty=!1}add(t){H(this.children,t);this.isDirty=!0}remove(t){z(this.children,t);this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ii);this.isDirty=!1;this.children.forEach(t)}}function ri(t,e){const n=p.now();const s=({timestamp:i})=>{const o=i-n;if(o>=e){m(s);t(o-e)}};f.setup(s,!0);return()=>m(s)}const ai=["TopLeft","TopRight","BottomLeft","BottomRight"];const ci=ai.length;const li=t=>"string"==typeof t?parseFloat(t):t;const ui=t=>"number"==typeof t||l.test(t);function hi(t,e,n,s,i,o){if(i){t.opacity=u(0,n.opacity??1,pi(s));t.opacityExit=u(e.opacity??1,0,fi(s))}else o&&(t.opacity=u(e.opacity??1,n.opacity??1,s));for(let r=0;r<ci;r++){const i=`border${ai[r]}Radius`;let o=di(e,i);let a=di(n,i);if(void 0!==o||void 0!==a){o||(o=0);a||(a=0);if(0===o||0===a||ui(o)===ui(a)){t[i]=Math.max(u(li(o),li(a),s),0);($.test(a)||$.test(o))&&(t[i]+="%")}else t[i]=a}}(e.rotate||n.rotate)&&(t.rotate=u(e.rotate||0,n.rotate||0,s))}function di(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const pi=mi(0,.5,X);const fi=mi(.5,.95,N);function mi(t,e,n){return s=>s<t?0:s>e?1:n(O(t,e,s))}function gi(t,e){t.min=e.min;t.max=e.max}function yi(t,e){gi(t.x,e.x);gi(t.y,e.y)}function vi(t,e){t.translate=e.translate;t.scale=e.scale;t.originPoint=e.originPoint;t.origin=e.origin}function xi(t,e,n,s,i){t=We(t-=e,1/n,s);void 0!==i&&(t=We(t,1/i,s));return t}function Pi(t,e=0,n=1,s=.5,i,o=t,r=t){if($.test(e)){e=parseFloat(e);e=u(r.min,r.max,e/100)-r.min}if("number"!=typeof e)return;let a=u(o.min,o.max,s);t===o&&(a-=e);t.min=xi(t.min,e,n,a,i);t.max=xi(t.max,e,n,a,i)}function Si(t,e,[n,s,i],o,r){Pi(t,e[n],e[s],e[i],e.scale,o,r)}const wi=["x","scaleX","originX"];const Ti=["y","scaleY","originY"];function Ci(t,e,n,s){Si(t.x,e,wi,n?n.x:void 0,s?s.x:void 0);Si(t.y,e,Ti,n?n.y:void 0,s?s.y:void 0)}function Ei(t){return 0===t.translate&&1===t.scale}function Ai(t){return Ei(t.x)&&Ei(t.y)}function Vi(t,e){return t.min===e.min&&t.max===e.max}function Di(t,e){return Vi(t.x,e.x)&&Vi(t.y,e.y)}function Mi(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ri(t,e){return Mi(t.x,e.x)&&Mi(t.y,e.y)}function bi(t){return ds(t.x)/ds(t.y)}function Li(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ji{constructor(){this.members=[]}add(t){H(this.members,t);t.scheduleRender()}remove(t){z(this.members,t);t===this.prevLead&&(this.prevLead=void 0);if(t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex(e=>t===e);if(0===e)return!1;let n;for(let s=e;s>=0;s--){const t=this.members[s];if(!1!==t.isPresent){n=t;break}}if(n){this.promote(n);return!0}return!1}promote(t,e){const n=this.lead;if(t!==n){this.prevLead=n;this.lead=t;t.show();if(n){n.instance&&n.scheduleRender();t.scheduleRender();t.resumeFrom=n;e&&(t.resumeFrom.preserveOpacity=!0);if(n.snapshot){t.snapshot=n.snapshot;t.snapshot.latestValues=n.animationValues||n.latestValues}t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;!1===s&&n.hide()}}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete();n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bi(t,e,n){let s="";const i=t.x.translate/e.x;const o=t.y.translate/e.y;const r=n?.z||0;(i||o||r)&&(s=`translate3d(${i}px, ${o}px, ${r}px) `);1===e.x&&1===e.y||(s+=`scale(${1/e.x}, ${1/e.y}) `);if(n){const{transformPerspective:t,rotate:e,rotateX:i,rotateY:o,skewX:r,skewY:a}=n;t&&(s=`perspective(${t}px) ${s}`);e&&(s+=`rotate(${e}deg) `);i&&(s+=`rotateX(${i}deg) `);o&&(s+=`rotateY(${o}deg) `);r&&(s+=`skewX(${r}deg) `);a&&(s+=`skewY(${a}deg) `)}const a=t.x.scale*e.x;const c=t.y.scale*e.y;1===a&&1===c||(s+=`scale(${a}, ${c})`);return s||"none"}const ki=["","X","Y","Z"];const Fi=1e3;let Ii=0;function Oi(t,e,n,s){const{latestValues:i}=e;if(i[t]){n[t]=i[t];e.setStaticValue(t,0);s&&(s[t]=0)}}function Ui(t){t.hasCheckedOptimisedAppear=!0;if(t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=En(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",f,!(e||s))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Ui(s)}function Wi({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(t={},n=e?.()){this.id=Ii++;this.animationId=0;this.animationCommitId=0;this.children=new Set;this.options={};this.isTreeAnimating=!1;this.isAnimationBlocked=!1;this.isLayoutDirty=!1;this.isProjectionDirty=!1;this.isSharedProjectionDirty=!1;this.isTransformDirty=!1;this.updateManuallyBlocked=!1;this.updateBlockedByResize=!1;this.isUpdating=!1;this.isSVG=!1;this.needsReset=!1;this.shouldResetTransform=!1;this.hasCheckedOptimisedAppear=!1;this.treeScale={x:1,y:1};this.eventHandlers=new Map;this.hasTreeAnimated=!1;this.updateScheduled=!1;this.scheduleUpdate=()=>this.update();this.projectionUpdateScheduled=!1;this.checkUpdateFailed=()=>{if(this.isUpdating){this.isUpdating=!1;this.clearAllSnapshots()}};this.updateProjection=()=>{this.projectionUpdateScheduled=!1;this.nodes.forEach(Hi);this.nodes.forEach(qi);this.nodes.forEach(Ji);this.nodes.forEach(zi)};this.resolvedRelativeTargetAt=0;this.hasProjected=!1;this.isVisible=!0;this.animationProgress=0;this.sharedNodes=new Map;this.latestValues=t;this.root=n?n.root||n:this;this.path=n?[...n.path,n]:[];this.parent=n;this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new oi)}addEventListener(t,e){this.eventHandlers.has(t)||this.eventHandlers.set(t,new S);return this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e){if(this.instance)return;this.isSVG=Y(e)&&!G(e);this.instance=e;const{layoutId:n,layout:s,visualElement:i}=this.options;i&&!i.current&&i.mount(e);this.root.nodes.add(this);this.parent&&this.parent.children.add(this);this.root.hasTreeAnimated&&(s||n)&&(this.isLayoutDirty=!0);if(t){let n;let s=0;const i=()=>this.root.updateBlockedByResize=!1;f.read(()=>{s=window.innerWidth});t(e,()=>{const t=window.innerWidth;if(t!==s){s=t;this.root.updateBlockedByResize=!0;n&&n();n=ri(i,250);if(Zs.hasAnimatedSinceResize){Zs.hasAnimatedSinceResize=!1;this.nodes.forEach(Zi)}}})}n&&this.root.registerSharedNode(n,this);!1!==this.options.animate&&i&&(n||s)&&this.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e,hasRelativeLayoutChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked()){this.target=void 0;this.relativeTarget=void 0;return}const o=this.options.transition||i.getDefaultTransition()||io;const{onLayoutAnimationStart:r,onLayoutAnimationComplete:a}=i.getProps();const c=!this.targetLayout||!Ri(this.targetLayout,s);const l=!e&&n;if(this.options.layoutRoot||this.resumeFrom||l||e&&(c||!this.currentAnimation)){if(this.resumeFrom){this.resumingFrom=this.resumeFrom;this.resumingFrom.resumingFrom=void 0}const e={...D(o,"layout"),onPlay:r,onComplete:a};if(i.shouldReduceMotion||this.options.layoutRoot){e.delay=0;e.type=!1}this.startAnimation(e);this.setAnimationOrigin(t,l)}else{e||Zi(this);this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete()}this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate();this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this);this.parent&&this.parent.children.delete(this);this.instance=void 0;this.eventHandlers.clear();m(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){if(!this.isUpdateBlocked()){this.isUpdating=!0;this.nodes&&this.nodes.forEach(_i);this.animationId++}}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){this.root.hasTreeAnimated=!0;if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ui(this);!this.root.isUpdating&&this.root.startUpdate();if(this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0;t.updateScroll("snapshot");t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0;this.updateSnapshot();t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked()){this.unblockUpdate();this.clearAllSnapshots();this.nodes.forEach(Yi);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Gi);return}this.animationCommitId=this.animationId;if(this.isUpdating){this.isUpdating=!1;this.nodes.forEach(Ki);this.nodes.forEach($i);this.nodes.forEach(Ni)}else this.nodes.forEach(Gi);this.clearAllSnapshots();const t=p.now();k.delta=U(0,1e3/60,t-k.timestamp);k.timestamp=t;k.isProcessing=!0;K.update.process(k);K.preRender.process(k);K.render.process(k);k.isProcessing=!1}didUpdate(){if(!this.updateScheduled){this.updateScheduled=!0;w.read(this.scheduleUpdate)}}clearAllSnapshots(){this.nodes.forEach(Xi);this.sharedNodes.forEach(Qi)}scheduleUpdateProjection(){if(!this.projectionUpdateScheduled){this.projectionUpdateScheduled=!0;f.preRender(this.updateProjection,!1,!0)}}scheduleCheckAfterUnmount(){f.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){if(!this.snapshot&&this.instance){this.snapshot=this.measure();!this.snapshot||ds(this.snapshot.measuredBox.x)||ds(this.snapshot.measuredBox.y)||(this.snapshot=void 0)}}updateLayout(){if(!this.instance)return;this.updateScroll();if(!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++)this.path[n].updateScroll();const t=this.layout;this.layout=this.measure(!1);this.layoutCorrected=en();this.isLayoutDirty=!1;this.projectionDelta=void 0;this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1);if(e&&this.instance){const e=s(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!i)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout;const e=this.projectionDelta&&!Ai(this.projectionDelta);const n=this.getTransformTemplate();const s=n?n(this.latestValues,""):void 0;const o=s!==this.prevTransformTemplateValue;if(t&&this.instance&&(e||Ie(this.latestValues)||o)){i(this.instance,s);this.shouldResetTransform=!1;this.scheduleRender()}}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);t&&(n=this.removeTransform(n));co(n);return{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return en();const e=t.measureViewportBox();if(!this.scroll?.wasRoot&&!this.path.some(uo)){const{scroll:t}=this.root;if(t){Ge(e.x,t.offset.x);Ge(e.y,t.offset.y)}}return e}removeElementScroll(t){const e=en();yi(e,t);if(this.scroll?.wasRoot)return e;for(let n=0;n<this.path.length;n++){const s=this.path[n];const{scroll:i,options:o}=s;if(s!==this.root&&i&&o.layoutScroll){i.wasRoot&&yi(e,t);Ge(e.x,i.offset.x);Ge(e.y,i.offset.y)}}return e}applyTransform(t,e=!1){const n=en();yi(n,t);for(let s=0;s<this.path.length;s++){const t=this.path[s];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&Ze(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y});Ie(t.latestValues)&&Ze(n,t.latestValues)}Ie(this.latestValues)&&Ze(n,this.latestValues);return n}removeTransform(t){const e=en();yi(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!Ie(t.latestValues))continue;Fe(t.latestValues)&&t.updateSnapshot();const s=en();yi(s,t.measurePageBox());Ci(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,s)}Ie(this.latestValues)&&Ci(e,this.latestValues);return e}setTargetDelta(t){this.targetDelta=t;this.root.scheduleUpdateProjection();this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0;this.layout=void 0;this.snapshot=void 0;this.prevTransformTemplateValue=void 0;this.targetDelta=void 0;this.target=void 0;this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==k.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){const e=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty);this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty);this.isSharedProjectionDirty||(this.isSharedProjectionDirty=e.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==e;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){this.resolvedRelativeTargetAt=k.timestamp;if(!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();if(t&&t.layout&&1!==this.animationProgress){this.relativeParent=t;this.forceRelativeParentToResolveTarget();this.relativeTarget=en();this.relativeTargetOrigin=en();xs(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox);yi(this.relativeTarget,this.relativeTargetOrigin)}else this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(!this.target){this.target=en();this.targetWithTransforms=en()}if(this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){this.forceRelativeParentToResolveTarget();ys(this.target,this.relativeTarget,this.relativeParent.target)}else if(this.targetDelta){Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):yi(this.target,this.layout.layoutBox);He(this.target,this.targetDelta)}else yi(this.target,this.layout.layoutBox);if(this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();if(t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress){this.relativeParent=t;this.forceRelativeParentToResolveTarget();this.relativeTarget=en();this.relativeTargetOrigin=en();xs(this.relativeTargetOrigin,this.target,t.target);yi(this.relativeTarget,this.relativeTargetOrigin)}else this.relativeParent=this.relativeTarget=void 0}}}}getClosestProjectingParent(){if(this.parent&&!Fe(this.parent.latestValues)&&!Oe(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const t=this.getLead();const e=Boolean(this.resumingFrom)||this!==t;let n=!0;(this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1);e&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1);this.resolvedRelativeTargetAt===k.timestamp&&(n=!1);if(n)return;const{layout:s,layoutId:i}=this.options;this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation);this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0);if(!this.layout||!s&&!i)return;yi(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x;const r=this.treeScale.y;Ye(this.layoutCorrected,this.treeScale,this.path,e);if(t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)){t.target=t.layout.layoutBox;t.targetWithTransforms=en()}const{target:a}=t;if(a){if(this.projectionDelta&&this.prevProjectionDelta){vi(this.prevProjectionDelta.x,this.projectionDelta.x);vi(this.prevProjectionDelta.y,this.projectionDelta.y)}else this.createProjectionDeltas();ms(this.projectionDelta,this.layoutCorrected,a,this.latestValues);if(this.treeScale.x!==o||this.treeScale.y!==r||!Li(this.projectionDelta.x,this.prevProjectionDelta.x)||!Li(this.projectionDelta.y,this.prevProjectionDelta.y)){this.hasProjected=!0;this.scheduleRender();this.notifyListeners("projectionUpdate",a)}}else if(this.prevProjectionDelta){this.createProjectionDeltas();this.scheduleRender()}}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){this.options.visualElement?.scheduleRender();if(t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qe();this.projectionDelta=Qe();this.projectionDeltaWithTransform=Qe()}setAnimationOrigin(t,e=!1){const n=this.snapshot;const s=n?n.latestValues:{};const i={...this.latestValues};const o=Qe();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0);this.attemptToResolveRelativeTarget=!e;const r=en();const a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0);const c=this.getStack();const l=!c||c.members.length<=1;const u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(so));this.animationProgress=0;let h;this.mixTargetDelta=e=>{const n=e/1e3;to(o.x,t.x,n);to(o.y,t.y,n);this.setTargetDelta(o);if(this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){xs(r,this.layout.layoutBox,this.relativeParent.layout.layoutBox);no(this.relativeTarget,this.relativeTargetOrigin,r,n);h&&Di(this.relativeTarget,h)&&(this.isProjectionDirty=!1);h||(h=en());yi(h,this.relativeTarget)}if(a){this.animationValues=i;hi(i,s,this.latestValues,n,u,l)}this.root.scheduleUpdateProjection();this.scheduleRender();this.animationProgress=n};this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart");this.currentAnimation?.stop();this.resumingFrom?.currentAnimation?.stop();if(this.pendingAnimation){m(this.pendingAnimation);this.pendingAnimation=void 0}this.pendingAnimation=f.update(()=>{Zs.hasAnimatedSinceResize=!0;this.motionValue||(this.motionValue=h(0));this.currentAnimation=si(this.motionValue,[0,1e3],{...t,velocity:0,isSync:!0,onUpdate:e=>{this.mixTargetDelta(e);t.onUpdate&&t.onUpdate(e)},onStop:()=>{},onComplete:()=>{t.onComplete&&t.onComplete();this.completeAnimation()}});this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation);this.pendingAnimation=void 0})}completeAnimation(){if(this.resumingFrom){this.resumingFrom.currentAnimation=void 0;this.resumingFrom.preserveOpacity=void 0}const t=this.getStack();t&&t.exitAnimationComplete();this.resumingFrom=this.currentAnimation=this.animationValues=void 0;this.notifyListeners("animationComplete")}finishAnimation(){if(this.currentAnimation){this.mixTargetDelta&&this.mixTargetDelta(Fi);this.currentAnimation.stop()}this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:s,latestValues:i}=t;if(e&&n&&s){if(this!==t&&this.layout&&s&&lo(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||en();const e=ds(this.layout.layoutBox.x);n.x.min=t.target.x.min;n.x.max=n.x.min+e;const s=ds(this.layout.layoutBox.y);n.y.min=t.target.y.min;n.y.max=n.y.min+s}yi(e,n);Ze(e,i);ms(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new ji);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){const{layoutId:t}=this.options;return t&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:t}=this.options;return t?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n);if(t){this.projectionDelta=void 0;this.needsReset=!0}e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;(n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0);if(!e)return;const s={};n.z&&Oi("z",t,s,this.animationValues);for(let i=0;i<ki.length;i++){Oi(`rotate${ki[i]}`,t,s,this.animationValues);Oi(`skew${ki[i]}`,t,s,this.animationValues)}t.render();for(const i in s){t.setStaticValue(i,s[i]);this.animationValues&&(this.animationValues[i]=s[i])}t.scheduleRender()}applyProjectionStyles(t,e){if(!this.instance||this.isSVG)return;if(!this.isVisible){t.visibility="hidden";return}const n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1;t.visibility="";t.opacity="";t.pointerEvents=ue(e?.pointerEvents)||"";t.transform=n?n(this.latestValues,""):"none";return}const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){if(this.options.layoutId){t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1;t.pointerEvents=ue(e?.pointerEvents)||""}if(this.hasProjected&&!Ie(this.latestValues)){t.transform=n?n({},""):"none";this.hasProjected=!1}return}t.visibility="";const i=s.animationValues||s.latestValues;this.applyTransformsToTarget();let o=Bi(this.projectionDeltaWithTransform,this.treeScale,i);n&&(o=n(i,o));t.transform=o;const{x:r,y:a}=this.projectionDelta;t.transformOrigin=`${100*r.origin}% ${100*a.origin}% 0`;s.animationValues?t.opacity=s===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:t.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in Wt){if(void 0===i[c])continue;const{correct:e,applyTo:n,isCSSVariable:r}=Wt[c];const a="none"===o?i[c]:e(i[c],s);if(n){const e=n.length;for(let s=0;s<e;s++)t[n[s]]=a}else r?this.options.visualElement.renderState.vars[c]=a:t[c]=a}this.options.layoutId&&(t.pointerEvents=s===this?ue(e?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(t=>t.currentAnimation?.stop());this.root.nodes.forEach(Yi);this.root.sharedNodes.clear()}}}function $i(t){t.updateLayout()}function Ni(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout;const{animationType:i}=t.options;const o=e.source!==t.layout.source;"size"===i?Ps(t=>{const s=o?e.measuredBox[t]:e.layoutBox[t];const i=ds(s);s.min=n[t].min;s.max=s.min+i}):lo(i,e.layoutBox,n)&&Ps(s=>{const i=o?e.measuredBox[s]:e.layoutBox[s];const r=ds(n[s]);i.max=i.min+r;if(t.relativeTarget&&!t.currentAnimation){t.isProjectionDirty=!0;t.relativeTarget[s].max=t.relativeTarget[s].min+r}});const r=Qe();ms(r,n,e.layoutBox);const a=Qe();o?ms(a,t.applyTransform(s,!0),e.measuredBox):ms(a,n,e.layoutBox);const c=!Ai(r);let l=!1;if(!t.resumeFrom){const s=t.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:i,layout:o}=s;if(i&&o){const r=en();xs(r,e.layoutBox,i.layoutBox);const a=en();xs(a,n,o.layoutBox);Ri(r,a)||(l=!0);if(s.options.layoutRoot){t.relativeTarget=a;t.relativeTargetOrigin=r;t.relativeParent=s}}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:r,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function Hi(t){if(t.parent){t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty);t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty));t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty)}}function zi(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Xi(t){t.clearSnapshot()}function Yi(t){t.clearMeasurements()}function Gi(t){t.isLayoutDirty=!1}function Ki(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure");t.resetTransform()}function Zi(t){t.finishAnimation();t.targetDelta=t.relativeTarget=t.target=void 0;t.isProjectionDirty=!0}function qi(t){t.resolveTargetDelta()}function Ji(t){t.calcProjection()}function _i(t){t.resetSkewAndRotation()}function Qi(t){t.removeLeadSnapshot()}function to(t,e,n){t.translate=u(e.translate,0,n);t.scale=u(e.scale,1,n);t.origin=e.origin;t.originPoint=e.originPoint}function eo(t,e,n,s){t.min=u(e.min,n.min,s);t.max=u(e.max,n.max,s)}function no(t,e,n,s){eo(t.x,e.x,n.x,s);eo(t.y,e.y,n.y,s)}function so(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const io={duration:.45,ease:[.4,0,.1,1]};const oo=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t);const ro=oo("applewebkit/")&&!oo("chrome/")?Math.round:N;function ao(t){t.min=ro(t.min);t.max=ro(t.max)}function co(t){ao(t.x);ao(t.y)}function lo(t,e,n){return"position"===t||"preserve-aspect"===t&&!ps(bi(e),bi(n),.2)}function uo(t){return t!==t.root&&t.scroll?.wasRoot}const ho=Wi({attachResizeListener:(t,e)=>ns(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0});const po={current:void 0};const fo=Wi({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!po.current){const t=new ho({});t.mount(window);t.setOptions({layoutScroll:!0});po.current=t}return po.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)});const mo={pan:{Feature:Ks},drag:{Feature:Ys,ProjectionNode:fo,MeasureLayout:ei}};function go(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover","Start"===n);const i=s["onHover"+n];i&&f.postRender(()=>i(e,ss(e)))}class yo extends Jn{mount(){const{current:t}=this.node;t&&(this.unmount=Z(t,(t,e)=>{go(this.node,e,"Start");return t=>go(this.node,t,"End")}))}unmount(){}}class vo extends Jn{constructor(){super(...arguments);this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}if(t&&this.node.animationState){this.node.animationState.setActive("whileFocus",!0);this.isActive=!0}}onBlur(){if(this.isActive&&this.node.animationState){this.node.animationState.setActive("whileFocus",!1);this.isActive=!1}}mount(){this.unmount=F(ns(this.node.current,"focus",()=>this.onFocus()),ns(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xo(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap","Start"===n);const i=s["onTap"+("End"===n?"":n)];i&&f.postRender(()=>i(e,ss(e)))}class Po extends Jn{mount(){const{current:t}=this.node;t&&(this.unmount=q(t,(t,e)=>{xo(this.node,e,"Start");return(t,{success:e})=>xo(this.node,t,e?"End":"Cancel")},{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const So=new WeakMap;const wo=new WeakMap;const To=t=>{const e=So.get(t.target);e&&e(t)};const Co=t=>{t.forEach(To)};function Eo({root:t,...e}){const n=t||document;wo.has(n)||wo.set(n,{});const s=wo.get(n);const i=JSON.stringify(e);s[i]||(s[i]=new IntersectionObserver(Co,{root:t,...e}));return s[i]}function Ao(t,e,n){const s=Eo(e);So.set(t,n);s.observe(t);return()=>{So.delete(t);s.unobserve(t)}}const Vo={some:0,all:1};class Do extends Jn{constructor(){super(...arguments);this.hasEnteredView=!1;this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps();const{root:e,margin:n,amount:s="some",once:i}=t;const o={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:Vo[s]};const r=t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;this.isInView=e;if(i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0);this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps();const o=e?n:s;o&&o(t)};return Ao(this.node.current,o,r)}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(Mo(t,e))&&this.startObserver()}unmount(){}}function Mo({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ro=be({...es,inView:{Feature:Do},tap:{Feature:Po},focus:{Feature:vo},hover:{Feature:yo},...mo,layout:{ProjectionNode:fo,MeasureLayout:ei}},yn);const bo=50;const Lo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0});const jo=()=>({time:0,x:Lo(),y:Lo()});const Bo={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function ko(t,e,n,s){const i=n[e];const{length:o,position:r}=Bo[e];const a=i.current;const c=n.time;i.current=t[`scroll${r}`];i.scrollLength=t[`scroll${o}`]-t[`client${o}`];i.offset.length=0;i.offset[0]=0;i.offset[1]=i.scrollLength;i.progress=O(0,i.scrollLength,i.current);const l=s-c;i.velocity=l>bo?0:J(i.current-a,l)}function Fo(t,e,n){ko(t,"x",e,n);ko(t,"y",e,n);e.time=n}function Io(t,e){const s={x:0,y:0};let i=t;for(;i&&i!==e;)if(n(i)){s.x+=i.offsetLeft;s.y+=i.offsetTop;i=i.offsetParent}else if("svg"===i.tagName){const t=i.getBoundingClientRect();i=i.parentElement;const e=i.getBoundingClientRect();s.x+=t.left-e.left;s.y+=t.top-e.top}else{if(!(i instanceof SVGGraphicsElement))break;{const{x:t,y:e}=i.getBBox();s.x+=t;s.y+=e;let n=null;let o=i.parentNode;for(;!n;){"svg"===o.tagName&&(n=o);o=i.parentNode}i=n}}return s}const Oo={start:0,center:.5,end:1};function Uo(t,e,n=0){let s=0;t in Oo&&(t=Oo[t]);if("string"==typeof t){const e=parseFloat(t);t.endsWith("px")?s=e:t.endsWith("%")?t=e/100:t.endsWith("vw")?s=e/100*document.documentElement.clientWidth:t.endsWith("vh")?s=e/100*document.documentElement.clientHeight:t=e}"number"==typeof t&&(s=e*t);return n+s}const Wo=[0,0];function $o(t,e,n,s){let i=Array.isArray(t)?t:Wo;let o=0;let r=0;"number"==typeof t?i=[t,t]:"string"==typeof t&&(i=(t=t.trim()).includes(" ")?t.split(" "):[t,Oo[t]?t:`0`]);o=Uo(i[0],n,s);r=Uo(i[1],e);return o-r}const No={All:[[0,0],[1,1]]};const Ho={x:0,y:0};function zo(t){return"getBBox"in t&&"svg"!==t.tagName?t.getBBox():{width:t.clientWidth,height:t.clientHeight}}function Xo(t,e,n){const{offset:s=No.All}=n;const{target:i=t,axis:o="y"}=n;const r="y"===o?"height":"width";const a=i!==t?Io(i,t):Ho;const c=i===t?{width:t.scrollWidth,height:t.scrollHeight}:zo(i);const l={width:t.clientWidth,height:t.clientHeight};e[o].offset.length=0;let u=!e[o].interpolate;const h=s.length;for(let d=0;d<h;d++){const t=$o(s[d],l[r],c[r],a[o]);u||t===e[o].interpolatorOffsets[d]||(u=!0);e[o].offset[d]=t}if(u){e[o].interpolate=_(e[o].offset,Q(s),{clamp:!1});e[o].interpolatorOffsets=[...e[o].offset]}e[o].progress=U(0,1,e[o].interpolate(e[o].current))}function Yo(t,e=t,n){n.x.targetOffset=0;n.y.targetOffset=0;if(e!==t){let s=e;for(;s&&s!==t;){n.x.targetOffset+=s.offsetLeft;n.y.targetOffset+=s.offsetTop;s=s.offsetParent}}n.x.targetLength=e===t?e.scrollWidth:e.clientWidth;n.y.targetLength=e===t?e.scrollHeight:e.clientHeight;n.x.containerLength=t.clientWidth;n.y.containerLength=t.clientHeight}function Go(t,e,n,s={}){return{measure:e=>{Yo(t,s.target,n);Fo(t,n,e);(s.offset||s.target)&&Xo(t,n,s)},notify:()=>e(n)}}const Ko=new WeakMap;const Zo=new WeakMap;const qo=new WeakMap;const Jo=t=>t===document.scrollingElement?window:t;function _o(t,{container:e=document.scrollingElement,...n}={}){if(!e)return N;let s=qo.get(e);if(!s){s=new Set;qo.set(e,s)}const i=jo();const o=Go(e,t,i,n);s.add(o);if(!Ko.has(e)){const t=()=>{for(const t of s)t.measure(k.timestamp);f.preUpdate(n)};const n=()=>{for(const t of s)t.notify()};const i=()=>f.read(t);Ko.set(e,i);const o=Jo(e);window.addEventListener("resize",i,{passive:!0});e!==document.documentElement&&Zo.set(e,tt(e,i));o.addEventListener("scroll",i,{passive:!0});i()}const r=Ko.get(e);f.read(r,!1,!0);return()=>{m(r);const t=qo.get(e);if(!t)return;t.delete(o);if(t.size)return;const n=Ko.get(e);Ko.delete(e);if(n){Jo(e).removeEventListener("scroll",n);Zo.get(e)?.();window.removeEventListener("resize",n)}}}const Qo=new Map;function tr(t){const e={value:0};const n=_o(n=>{e.value=100*n[t.axis].progress},t);return{currentTime:e,cancel:n}}function er({source:t,container:e,...n}){const{axis:s}=n;t&&(e=t);const i=Qo.get(e)??new Map;Qo.set(e,i);const o=n.target??"self";const r=i.get(o)??{};const a=s+(n.offset??[]).join(",");r[a]||(r[a]=!n.target&&et()?new ScrollTimeline({source:e,axis:s}):tr({container:e,...n}));return r[a]}function nr(t,e){const n=er(e);return t.attachTimeline({timeline:e.target?void 0:n,observe:t=>{t.pause();return nt(e=>{t.time=t.duration*e},n)}})}function sr(t){return 2===t.length}function ir(t,e){return sr(t)?_o(n=>{t(n[e.axis].progress,n)},e):nt(t,er(e))}function or(t,{axis:e="y",container:n=document.scrollingElement,...s}={}){if(!n)return N;const i={axis:e,container:n,...s};return"function"==typeof t?ir(t,i):nr(t,i)}const rr=()=>({scrollX:h(0),scrollY:h(0),scrollXProgress:h(0),scrollYProgress:h(0)});const ar=t=>!!t&&!t.current;function cr({container:e,target:n,...s}={}){const i=ct(rr);const o=t.useRef(null);const r=t.useRef(!1);const a=t.useCallback(()=>{o.current=or((t,{x:e,y:n})=>{i.scrollX.set(e.current);i.scrollXProgress.set(e.progress);i.scrollY.set(n.current);i.scrollYProgress.set(n.progress)},{...s,container:e?.current||void 0,target:n?.current||void 0});return()=>{o.current?.()}},[e,n,JSON.stringify(s.offset)]);ut(()=>{r.current=!1;if(!ar(e)&&!ar(n))return a();r.current=!0},[a]);t.useEffect(()=>{if(r.current){st(!ar(e));st(!ar(n));return a()}},[a]);return i}function lr(e){const n=ct(()=>h(e));const{isStatic:s}=t.useContext(dt);if(s){const[,s]=t.useState(e);t.useEffect(()=>n.on("change",s),[])}return n}function ur(t,e){const n=lr(e());const s=()=>n.set(e());s();ut(()=>{const e=()=>f.preRender(s,!1,!0);const n=t.map(t=>t.on("change",e));return()=>{n.forEach(t=>t());m(s)}});return n}function hr(t){it.current=[];t();const e=ur(it.current,t);it.current=void 0;return e}function dr(t,e,n,s){if("function"==typeof t)return hr(t);const i="function"==typeof e?e:ot(e,n,s);return Array.isArray(t)?pr(t,i):pr([t],([t])=>i(t))}function pr(t,e){const n=ct(()=>[]);return ur(t,()=>{n.length=0;const s=t.length;for(let e=0;e<s;e++)n[e]=t[e].get();return e(n)})}function fr(e,n={}){const{isStatic:s}=t.useContext(dt);const i=()=>c(e)?e.get():e;if(s)return dr(i);const o=lr(i());t.useInsertionEffect(()=>rt(o,e,n),[o,JSON.stringify(n)]);return o}function mr(){!sn.current&&on();const[e]=t.useState(nn.current);return e}export{Pt as A,cr as a,dr as b,fr as c,Ro as m,mr as u};
