const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/HomePage-BHl4LDSC.js","assets/js/supabase-D6DFX1W9.js","assets/js/analytics-jR0q-LqR.js","assets/js/vendor-react-DGsprnG_.js","assets/js/SEOHead-DPSqN6IH.js","assets/js/react-helmet-BnDYGs-d.js","assets/js/vendor-CCnSY37f.js","assets/js/i18n-CcrSPu84.js","assets/js/useSEO-DbFoVbwg.js","assets/js/MediaLoader-CcZnRXtZ.js","assets/js/framer-motion-CNyOhlkC.js","assets/js/vendor-react-dom-eW4zCcd-.js","assets/js/react-icons-CIX4GkcY.js","assets/js/lucide-icons-BzS6JU5C.js","assets/js/web-vitals-CkdXpdH1.js","assets/js/AboutPage-B2vJhWFi.js","assets/js/CasePage-g5_xSxkt.js","assets/js/Circle-D5ovLlZL.js","assets/js/Cycle-B0hqE1bp.js","assets/js/Semicircle-Bl1ibhWc.js","assets/js/AdminPage-DXS5BYSj.js","assets/js/supabaseClient-CtA22CKB.js","assets/js/LoginPage-DnkcNOx8.js","assets/js/NotFoundPage-BFJn3nis.js","assets/js/analytics-CzbQfklZ.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty;var t=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var n=(e,n,o)=>t(e,"symbol"!=typeof n?n+"":n,o);import{r as o,j as r,R as i}from"./vendor-react-DGsprnG_.js";import{R as a}from"./vendor-react-dom-eW4zCcd-.js";import{H as s,a as c}from"./react-helmet-BnDYGs-d.js";import{_ as l}from"./supabase-D6DFX1W9.js";import{F as d,a as u,b as m,c as h,d as f}from"./react-icons-CIX4GkcY.js";import{u as p,i as v,a as x}from"./i18n-CcrSPu84.js";import{a9 as g,aa as y,ab as b,ac as w,ad as E,ae as T,af as j,ag as S,ah as R}from"./vendor-CCnSY37f.js";import{m as _,A as N}from"./framer-motion-CNyOhlkC.js";import{I as A,P as L,M as C,a as D}from"./lucide-icons-BzS6JU5C.js";import{L as F,E as I,x as k,$ as P,S as z}from"./web-vitals-CkdXpdH1.js";import"./analytics-jR0q-LqR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){const t={};e.integrity&&(t.integrity=e.integrity);e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy);"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin";return t}function n(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}}();const U=()=>{const{i18n:e}=p();const[t,n]=o.useState(!1);const i=o.useRef(null);const a=t=>{e.changeLanguage(t);n(!1)};const s=e.language||"en";o.useEffect(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};document.addEventListener("mousedown",e);return()=>{document.removeEventListener("mousedown",e)}},[]);const c=[{code:"en",name:"EN",fullName:"English"},{code:"ru",name:"RU",fullName:"Русский"}];const l=c.find(e=>e.code===s);return r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-1 px-2 py-1 text-white/70 hover:text-white transition-colors duration-200 text-sm font-light",style:{background:"none",border:"none",cursor:"pointer"},children:[r.jsx("span",{children:l?.name||"EN"}),r.jsx(d,{className:`w-3 h-3 transition-transform duration-200 ${t?"rotate-180":"rotate-0"}`})]}),t&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-black/90 backdrop-blur-md rounded-lg shadow-lg border border-white/10 overflow-hidden",style:{minWidth:"120px",zIndex:1e3},children:c.map(e=>r.jsx("button",{onClick:()=>a(e.code),className:`w-full text-left px-3 py-2 text-sm transition-colors duration-150 ${s===e.code?"bg-white/10 text-white":"text-white/70 hover:bg-white/5 hover:text-white"}`,style:{background:s===e.code?"rgba(255, 255, 255, 0.1)":"transparent",border:"none",cursor:"pointer"},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-light",children:e.name}),r.jsx("span",{className:"text-xs opacity-60",children:e.fullName})]})},e.code))})]})};const O=(e,t={})=>{const{maxAttempts:n=20,delay:o=200,offset:r=0,behavior:i="smooth"}=t;const a=(t=0)=>{const s=document.getElementById(e);if(s){const e=s.getBoundingClientRect().top+window.pageYOffset-r;"smooth"===i?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e);return!0}if(t<n){setTimeout(()=>a(t+1),o);return!1}void 0;return!1};return a()};const B=(e,t,n,o,r={})=>{if(t!==n){sessionStorage.setItem("scrollToSection",o);e(n,{state:{scrollTo:o}})}else O(o,r)};const M=Object.freeze(Object.defineProperty({__proto__:null,navigateToSection:B,scrollToElement:O},Symbol.toStringTag,{value:"Module"}));const X=()=>{const{t:e}=p();const[t,n]=o.useState(!1);const[i,a]=o.useState(!1);const s=g();const c=y();const l=o.useRef(null);const h=()=>{n(!t)};o.useEffect(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&a(!1)};document.addEventListener("mousedown",e);return()=>{document.removeEventListener("mousedown",e)}},[]);const f=e=>{B(c,s.pathname,"/",e,{maxAttempts:15,delay:150,offset:80});n(!1);a(!1)};const v=e=>{c(e);setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100);a(!1);n(!1)};const x=[{name:"Semicircle",path:"/semicircle"},{name:"Circle",path:"/circle"},{name:"Cycle",path:"/cycle"}];return r.jsxs(_.header,{style:{position:"fixed",top:0,left:0,width:"100%",zIndex:50,padding:"1.5rem 3rem",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)"},initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100,damping:20},children:[r.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"1920px",margin:"0 auto"},children:[r.jsx("div",{style:{flexShrink:0},children:r.jsx(b,{to:"/",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:r.jsx("img",{src:"/img/logo-header.png",alt:"Circle Buro",style:{height:"2.5rem"}})})}),r.jsxs("div",{className:"hidden lg:flex",style:{flex:1,justifyContent:"center",gap:"2rem",alignItems:"center"},children:[r.jsx(b,{to:"/",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),style:{color:"#ffffff",fontWeight:400,fontSize:"1rem",transition:"all 0.3s ease",textShadow:"/"===s.pathname?"0 0 8px rgba(255, 255, 255, 0.8)":"none"},className:"hover:text-shadow",children:e("nav.home")}),r.jsxs("div",{className:"relative",ref:l,children:[r.jsxs("button",{onClick:()=>a(!i),style:{color:"#ffffff",fontWeight:400,fontSize:"1rem",transition:"all 0.3s ease",background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},className:"hover:text-shadow",children:[e("nav.services"),r.jsx(d,{className:`w-3 h-3 transition-transform duration-200 ${i?"rotate-180":"rotate-0"}`})]}),i&&r.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-black/90 backdrop-blur-md rounded-lg shadow-lg border border-white/10 overflow-hidden",style:{minWidth:"160px",zIndex:1e3},children:[r.jsx("button",{onClick:()=>f("services"),className:"w-full text-left px-4 py-3 text-sm text-white/70 hover:bg-white/5 hover:text-white transition-colors duration-150",style:{background:"transparent",border:"none",cursor:"pointer"},children:e("nav.services")}),r.jsx("div",{className:"border-t border-white/10"}),x.map(e=>r.jsx("button",{onClick:()=>v(e.path),className:"w-full text-left px-4 py-3 text-sm text-white/70 hover:bg-white/5 hover:text-white transition-colors duration-150",style:{background:"transparent",border:"none",cursor:"pointer"},children:e.name},e.path))]})]}),r.jsx(b,{to:"/about",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),style:{color:"#ffffff",fontWeight:400,fontSize:"1rem",transition:"all 0.3s ease",textShadow:"/about"===s.pathname?"0 0 8px rgba(255, 255, 255, 0.8)":"none"},className:"hover:text-shadow",children:e("nav.about")}),r.jsx("button",{onClick:()=>f("projects"),style:{color:"#ffffff",fontWeight:400,fontSize:"1rem",transition:"all 0.3s ease",background:"none",border:"none",cursor:"pointer"},className:"hover:text-shadow",children:e("nav.portfolio")})]}),r.jsx(U,{}),r.jsx("div",{className:"hidden lg:flex",style:{alignItems:"center"},children:r.jsx("button",{onClick:()=>f("contact"),className:"btn-dark-theme",style:{margin:"0rem 1.4rem",padding:"0.5rem 1.4rem",backgroundColor:"#FFFFFF",color:"#282729",fontWeight:600,fontSize:"1rem",borderRadius:"9999px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer"},children:e("nav.contact")})}),r.jsx("div",{className:"lg:hidden",style:{alignItems:"center",gap:"1rem"},children:r.jsx("button",{onClick:h,style:{color:"#FFFFFF",fontSize:"1.5rem"},children:t?r.jsx(u,{}):r.jsx(m,{})})})]}),r.jsx(N,{children:t&&r.jsxs(_.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"lg:hidden",style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"1rem",gap:"1rem"},children:[r.jsx(b,{to:"/",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"});h()},style:{color:"#FFFFFF",fontSize:"1rem",fontWeight:300,transition:"all 0.3s ease"},children:e("nav.home")}),r.jsx("button",{onClick:()=>{f("services");h()},style:{color:"#FFFFFF",fontSize:"1rem",fontWeight:300,transition:"all 0.3s ease",background:"none",border:"none",cursor:"pointer"},children:e("nav.services")}),x.map(e=>r.jsx("button",{onClick:()=>{v(e.path);h()},style:{color:"#FFFFFF",fontSize:"0.9rem",fontWeight:300,transition:"all 0.3s ease",background:"none",border:"none",cursor:"pointer",paddingLeft:"1rem",opacity:.8},children:e.name},e.path)),r.jsx(b,{to:"/about",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"});h()},style:{color:"#FFFFFF",fontSize:"1rem",fontWeight:300,transition:"all 0.3s ease"},children:e("nav.about")}),r.jsx("button",{onClick:()=>f("projects"),style:{color:"#FFFFFF",fontSize:"1rem",fontWeight:300,transition:"all 0.3s ease",background:"none",border:"none",cursor:"pointer"},children:e("nav.portfolio")}),r.jsx("button",{onClick:()=>f("contact"),className:"btn-dark-theme",style:{padding:"0.5rem 1.2rem",backgroundColor:"#FFFFFF",color:"#282729",fontWeight:600,fontSize:"1rem",borderRadius:"9999px",marginTop:"1rem",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:e("nav.contact")})]})})]})};const G=()=>{const{t:e}=p();const t=y();const n=g();const o=e=>{B(t,n.pathname,"/",e,{maxAttempts:15,delay:150,offset:80})};const i=Array.from({length:20},(e,t)=>({id:t,size:2*Math.random()+1,x:100*Math.random(),y:100*Math.random(),delay:3*Math.random(),duration:2*Math.random()+2,opacity:.6*Math.random()+.2}));const a=[{name:e("nav.home"),to:"/",isLink:!0},{name:e("nav.about"),to:"/about",isLink:!0},{name:e("nav.services"),sectionId:"services",isLink:!1},{name:e("nav.portfolio"),sectionId:"projects",isLink:!1},{name:e("nav.contact"),sectionId:"contact",isLink:!1}];const s=[{name:"Semicircle",to:"/semicircle"},{name:"Circle",to:"/circle"},{name:"Cycle",to:"/cycle"}];const c=[{icon:L,text:"+7 776 153 60 92",href:"tel:+7 776 153 60 92"},{icon:L,text:"+7 775 420 18 40",href:"tel:+7 775 420 18 40"},{icon:C,text:"2/2 Khodzhanova Street Almaty, Kazakhstan",href:"https://go.2gis.com/6P5z3"},{icon:D,text:"info@circleburo.kz",href:"mailto:info@circleburo.kz"}];const l=[{icon:h,href:"https://www.tiktok.com/@madebycircle?_t=ZM-8zT1mZUDsS0&_r=1",label:"TikTok"},{icon:A,href:"https://www.instagram.com/circlemade.it/",label:"Instagram"},{icon:f,href:"https://www.threads.com/@circlemade.it",label:"Threads"}];return r.jsxs("footer",{className:"relative bg-black text-white overflow-hidden",children:[r.jsx(_.div,{className:"absolute inset-0 z-0",children:i.map(e=>r.jsx(_.div,{className:"absolute bg-white rounded-full",style:{left:`${e.x}%`,top:`${e.y}%`,width:`${e.size}px`,height:`${e.size}px`,transform:"translate(-50%, -50%)",boxShadow:`0 0 ${2*e.size}px rgba(255, 255, 255, 0.3)`},animate:{opacity:[.3*e.opacity,e.opacity,.3*e.opacity],scale:[.8,1.2,.8]},transition:{duration:e.duration,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:e.delay}},`footer-star-${e.id}`))}),r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-radial from-white/6 via-white/3 to-transparent rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/3 left-1/6 w-80 h-80 bg-gradient-radial from-white/4 via-white/2 to-transparent rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),r.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-8",children:[r.jsx(_.div,{className:"py-16 md:py-20 border-b border-white/10",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12 lg:gap-16",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsxs(_.div,{className:"mb-8",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:[r.jsx("img",{src:"/img/circle-logo.png",alt:"Circle Logo",className:"w-16 h-16 object-contain filter drop-shadow-lg mb-6"}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-white via-gray-300 to-gray-500 bg-clip-text text-transparent",children:"CIRCLE"})}),r.jsx("p",{className:"text-gray-400 text-lg leading-relaxed max-w-md",children:e("footer.description")})]}),r.jsx(_.div,{className:"flex space-x-4",initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:l.map((e,t)=>r.jsx(_.a,{href:e.href,className:"group w-12 h-12 bg-gradient-to-r from-white/8 to-white/4 hover:from-white/15 hover:to-white/10 border border-white/15 hover:border-white/30 rounded-full flex items-center justify-center transition-all duration-300",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},"aria-label":e.label,children:r.jsx(e.icon,{className:"w-5 h-5 text-white/70 group-hover:text-white transition-colors duration-300"})},t))})]}),r.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:[r.jsx("h4",{className:"text-xl font-semibold mb-18 text-white",children:e("footer.navigation")}),r.jsx("ul",{className:"mt-6 space-y-4",children:a.map((e,t)=>r.jsx("li",{children:e.isLink?r.jsxs(b,{to:e.to,onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-gray-400 hover:text-white transition-colors duration-300 text-lg group flex items-center",children:[e.name,r.jsxs(_.svg,{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:{x:-10},whileHover:{x:0},children:[r.jsx("path",{d:"M7 17L17 7"}),r.jsx("path",{d:"M7 7h10v10"})]})]}):r.jsxs("button",{onClick:()=>o(e.sectionId),className:"text-gray-400 hover:text-white transition-colors duration-300 text-lg group flex items-center bg-transparent border-none cursor-pointer",children:[e.name,r.jsxs(_.svg,{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:{x:-10},whileHover:{x:0},children:[r.jsx("path",{d:"M7 17L17 7"}),r.jsx("path",{d:"M7 7h10v10"})]})]})},t))})]}),r.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[r.jsx("h4",{className:"text-xl font-semibold mb-8 text-white",children:e("footer.services")}),r.jsx("ul",{className:"mt-6 space-y-4",children:s.map((e,t)=>r.jsx("li",{children:r.jsxs(b,{to:e.to,onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"text-gray-400 hover:text-white transition-colors duration-300 text-lg group flex items-center",children:[e.name,r.jsxs(_.svg,{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:{x:-10},whileHover:{x:0},children:[r.jsx("path",{d:"M7 17L17 7"}),r.jsx("path",{d:"M7 7h10v10"})]})]})},t))})]}),r.jsxs(_.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},viewport:{once:!0},children:[r.jsx("h4",{className:"text-xl font-semibold mb-8 text-white",children:e("footer.contact")}),r.jsx("ul",{className:"mt-6 space-y-4",children:c.map((e,t)=>r.jsx("li",{children:r.jsxs(_.a,{href:e.href,className:"text-gray-400 hover:text-white transition-colors duration-300 text-lg group flex items-center",children:[r.jsx(e.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),r.jsx("span",{className:"break-all",children:e.text})]})},t))})]})]})]})}),r.jsxs(_.div,{className:"py-8 flex flex-col md:flex-row justify-between items-center text-gray-500",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.4},viewport:{once:!0},children:[r.jsx("div",{className:"text-center md:text-left mb-4 md:mb-0",children:r.jsx("p",{children:e("footer.copyright")})}),r.jsx("div",{className:"flex space-x-6 text-sm",children:r.jsx(_.a,{href:"/privacy-policy-circle.pdf",className:"hover:text-white transition-colors duration-300",whileHover:{y:-2},children:e("footer.privacyPolicy")})})]})]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]})};function V({SIM_RESOLUTION:e=128,DYE_RESOLUTION:t=1440,CAPTURE_RESOLUTION:n=512,DENSITY_DISSIPATION:i=3.5,VELOCITY_DISSIPATION:a=2,PRESSURE:s=.1,PRESSURE_ITERATIONS:c=20,CURL:l=3,SPLAT_RADIUS:d=.2,SPLAT_FORCE:u=6e3,SHADING:m=!0,COLOR_UPDATE_SPEED:h=10,BACK_COLOR:f={r:.5,g:0,b:0},TRANSPARENT:p=!0}){const v=o.useRef(null);o.useEffect(()=>{const n=v.current;if(!n)return;function o(){this.id=-1;this.texcoordX=0;this.texcoordY=0;this.prevTexcoordX=0;this.prevTexcoordY=0;this.deltaX=0;this.deltaY=0;this.down=!1;this.moved=!1;this.color=[0,0,0]}let r={SIM_RESOLUTION:e,DYE_RESOLUTION:t,DENSITY_DISSIPATION:i,VELOCITY_DISSIPATION:a,PRESSURE:s,PRESSURE_ITERATIONS:c,CURL:l,SPLAT_RADIUS:d,SPLAT_FORCE:u,SHADING:m,COLOR_UPDATE_SPEED:h};let f=[new o];const{gl:p,ext:x}=g(n);if(!x.supportLinearFiltering){r.DYE_RESOLUTION=256;r.SHADING=!1}function g(e){const t={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};let n=e.getContext("webgl2",t);const o=!!n;o||(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t));let r;let i;if(o){n.getExtension("EXT_color_buffer_float");i=n.getExtension("OES_texture_float_linear")}else{r=n.getExtension("OES_texture_half_float");i=n.getExtension("OES_texture_half_float_linear")}n.clearColor(0,0,0,1);const a=o?n.HALF_FLOAT:r&&r.HALF_FLOAT_OES;let s;let c;let l;if(o){s=y(n,n.RGBA16F,n.RGBA,a);c=y(n,n.RG16F,n.RG,a);l=y(n,n.R16F,n.RED,a)}else{s=y(n,n.RGBA,n.RGBA,a);c=y(n,n.RGBA,n.RGBA,a);l=y(n,n.RGBA,n.RGBA,a)}return{gl:n,ext:{formatRGBA:s,formatRG:c,formatR:l,halfFloatTexType:a,supportLinearFiltering:i}}}function y(e,t,n,o){if(!b(e,t,n,o))switch(t){case e.R16F:return y(e,e.RG16F,e.RG,o);case e.RG16F:return y(e,e.RGBA16F,e.RGBA,o);default:return null}return{internalFormat:t,format:n}}function b(e,t,n,o){const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,n,o,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);return e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE}class w{constructor(e,t){this.vertexShader=e;this.fragmentShaderSource=t;this.programs=[];this.activeProgram=null;this.uniforms=[]}setKeywords(e){let t=0;for(let o=0;o<e.length;o++)t+=Le(e[o]);let n=this.programs[t];if(null==n){let o=S(p.FRAGMENT_SHADER,this.fragmentShaderSource,e);n=T(this.vertexShader,o);this.programs[t]=n}if(n!==this.activeProgram){this.uniforms=j(n);this.activeProgram=n}}bind(){p.useProgram(this.activeProgram)}}class E{constructor(e,t){this.uniforms={};this.program=T(e,t);this.uniforms=j(this.program)}bind(){p.useProgram(this.program)}}function T(e,t){let n=p.createProgram();p.attachShader(n,e);p.attachShader(n,t);p.linkProgram(n);p.getProgramParameter(n,p.LINK_STATUS)||void 0;return n}function j(e){let t=[];let n=p.getProgramParameter(e,p.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){let n=p.getActiveUniform(e,o).name;t[n]=p.getUniformLocation(e,n)}return t}function S(e,t,n){t=R(t,n);const o=p.createShader(e);p.shaderSource(o,t);p.compileShader(o);p.getShaderParameter(o,p.COMPILE_STATUS)||void 0;return o}function R(e,t){if(!t)return e;let n="";t.forEach(e=>{n+="#define "+e+"\n"});return n+e}const _=S(p.VERTEX_SHADER,`\n        precision highp float;\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform vec2 texelSize;\n\n        void main () {\n            vUv = aPosition * 0.5 + 0.5;\n            vL = vUv - vec2(texelSize.x, 0.0);\n            vR = vUv + vec2(texelSize.x, 0.0);\n            vT = vUv + vec2(0.0, texelSize.y);\n            vB = vUv - vec2(0.0, texelSize.y);\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n      `);const N=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n\n        void main () {\n            gl_FragColor = texture2D(uTexture, vUv);\n        }\n      `);const A=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float value;\n\n        void main () {\n            gl_FragColor = value * texture2D(uTexture, vUv);\n        }\n     `);const L=`\n      precision highp float;\n      precision highp sampler2D;\n      varying vec2 vUv;\n      varying vec2 vL;\n      varying vec2 vR;\n      varying vec2 vT;\n      varying vec2 vB;\n      uniform sampler2D uTexture;\n      uniform sampler2D uDithering;\n      uniform vec2 ditherScale;\n      uniform vec2 texelSize;\n\n      vec3 linearToGamma (vec3 color) {\n          color = max(color, vec3(0));\n          return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n      }\n\n      void main () {\n          vec3 c = texture2D(uTexture, vUv).rgb;\n          #ifdef SHADING\n              vec3 lc = texture2D(uTexture, vL).rgb;\n              vec3 rc = texture2D(uTexture, vR).rgb;\n              vec3 tc = texture2D(uTexture, vT).rgb;\n              vec3 bc = texture2D(uTexture, vB).rgb;\n\n              float dx = length(rc) - length(lc);\n              float dy = length(tc) - length(bc);\n\n              vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n              vec3 l = vec3(0.0, 0.0, 1.0);\n\n              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n              c *= diffuse;\n          #endif\n\n          float a = max(c.r, max(c.g, c.b));\n          gl_FragColor = vec4(c, a);\n      }\n    `;const C=S(p.FRAGMENT_SHADER,`\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uTarget;\n        uniform float aspectRatio;\n        uniform vec3 color;\n        uniform vec2 point;\n        uniform float radius;\n\n        void main () {\n            vec2 p = vUv - point.xy;\n            p.x *= aspectRatio;\n            vec3 splat = exp(-dot(p, p) / radius) * color;\n            vec3 base = texture2D(uTarget, vUv).xyz;\n            gl_FragColor = vec4(base + splat, 1.0);\n        }\n      `);const D=S(p.FRAGMENT_SHADER,`\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uSource;\n        uniform vec2 texelSize;\n        uniform vec2 dyeTexelSize;\n        uniform float dt;\n        uniform float dissipation;\n\n        vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n            vec2 st = uv / tsize - 0.5;\n            vec2 iuv = floor(st);\n            vec2 fuv = fract(st);\n\n            vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n            vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n            vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n            vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n            return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n        }\n\n        void main () {\n            #ifdef MANUAL_FILTERING\n                vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n                vec4 result = bilerp(uSource, coord, dyeTexelSize);\n            #else\n                vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n                vec4 result = texture2D(uSource, coord);\n            #endif\n            float decay = 1.0 + dissipation * dt;\n            gl_FragColor = result / decay;\n        }\n      `,x.supportLinearFiltering?null:["MANUAL_FILTERING"]);const F=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).x;\n            float R = texture2D(uVelocity, vR).x;\n            float T = texture2D(uVelocity, vT).y;\n            float B = texture2D(uVelocity, vB).y;\n\n            vec2 C = texture2D(uVelocity, vUv).xy;\n            if (vL.x < 0.0) { L = -C.x; }\n            if (vR.x > 1.0) { R = -C.x; }\n            if (vT.y > 1.0) { T = -C.y; }\n            if (vB.y < 0.0) { B = -C.y; }\n\n            float div = 0.5 * (R - L + T - B);\n            gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n        }\n      `);const I=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).y;\n            float R = texture2D(uVelocity, vR).y;\n            float T = texture2D(uVelocity, vT).x;\n            float B = texture2D(uVelocity, vB).x;\n            float vorticity = R - L - T + B;\n            gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n        }\n      `);const k=S(p.FRAGMENT_SHADER,`\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uCurl;\n        uniform float curl;\n        uniform float dt;\n\n        void main () {\n            float L = texture2D(uCurl, vL).x;\n            float R = texture2D(uCurl, vR).x;\n            float T = texture2D(uCurl, vT).x;\n            float B = texture2D(uCurl, vB).x;\n            float C = texture2D(uCurl, vUv).x;\n\n            vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n            force /= length(force) + 0.0001;\n            force *= curl * C;\n            force.y *= -1.0;\n\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity += force * dt;\n            velocity = min(max(velocity, -1000.0), 1000.0);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      `);const P=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uDivergence;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            float C = texture2D(uPressure, vUv).x;\n            float divergence = texture2D(uDivergence, vUv).x;\n            float pressure = (L + R + B + T - divergence) * 0.25;\n            gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n        }\n      `);const z=S(p.FRAGMENT_SHADER,`\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity.xy -= vec2(R - L, T - B);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      `);const U=(()=>{p.bindBuffer(p.ARRAY_BUFFER,p.createBuffer());p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),p.STATIC_DRAW);p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,p.createBuffer());p.bufferData(p.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),p.STATIC_DRAW);p.vertexAttribPointer(0,2,p.FLOAT,!1,0,0);p.enableVertexAttribArray(0);return(e,t=!1)=>{if(null==e){p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight);p.bindFramebuffer(p.FRAMEBUFFER,null)}else{p.viewport(0,0,e.width,e.height);p.bindFramebuffer(p.FRAMEBUFFER,e.fbo)}if(t){p.clearColor(0,0,0,1);p.clear(p.COLOR_BUFFER_BIT)}p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}})();let O,B,M,X,G;const V=new E(_,N);const Y=new E(_,A);const H=new E(_,C);const W=new E(_,D);const $=new E(_,F);const q=new E(_,I);const K=new E(_,k);const J=new E(_,P);const Z=new E(_,z);const Q=new w(_,L);function ee(){let e=Ne(r.SIM_RESOLUTION);let t=Ne(r.DYE_RESOLUTION);const n=x.halfFloatTexType;const o=x.formatRGBA;const i=x.formatRG;const a=x.formatR;const s=x.supportLinearFiltering?p.LINEAR:p.NEAREST;p.disable(p.BLEND);O=O?re(O,t.width,t.height,o.internalFormat,o.format,n,s):ne(t.width,t.height,o.internalFormat,o.format,n,s);B=B?re(B,e.width,e.height,i.internalFormat,i.format,n,s):ne(e.width,e.height,i.internalFormat,i.format,n,s);M=te(e.width,e.height,a.internalFormat,a.format,n,p.NEAREST);X=te(e.width,e.height,a.internalFormat,a.format,n,p.NEAREST);G=ne(e.width,e.height,a.internalFormat,a.format,n,p.NEAREST)}function te(e,t,n,o,r,i){p.activeTexture(p.TEXTURE0);let a=p.createTexture();p.bindTexture(p.TEXTURE_2D,a);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,i);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);p.texImage2D(p.TEXTURE_2D,0,n,e,t,0,o,r,null);let s=p.createFramebuffer();p.bindFramebuffer(p.FRAMEBUFFER,s);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a,0);p.viewport(0,0,e,t);p.clear(p.COLOR_BUFFER_BIT);return{texture:a,fbo:s,width:e,height:t,texelSizeX:1/e,texelSizeY:1/t,attach(e){p.activeTexture(p.TEXTURE0+e);p.bindTexture(p.TEXTURE_2D,a);return e}}}function ne(e,t,n,o,r,i){let a=te(e,t,n,o,r,i);let s=te(e,t,n,o,r,i);return{width:e,height:t,texelSizeX:a.texelSizeX,texelSizeY:a.texelSizeY,get read(){return a},set read(e){a=e},get write(){return s},set write(e){s=e},swap(){let e=a;a=s;s=e}}}function oe(e,t,n,o,r,i,a){let s=te(t,n,o,r,i,a);V.bind();p.uniform1i(V.uniforms.uTexture,e.attach(0));U(s);return s}function re(e,t,n,o,r,i,a){if(e.width===t&&e.height===n)return e;e.read=oe(e.read,t,n,o,r,i,a);e.write=te(t,n,o,r,i,a);e.width=t;e.height=n;e.texelSizeX=1/t;e.texelSizeY=1/n;return e}function ie(){let e=[];r.SHADING&&e.push("SHADING");Q.setKeywords(e)}ie();ee();let ae=Date.now();let se=0;function ce(){const e=le();de()&&ee();ue(e);me();he(e);fe(null);requestAnimationFrame(ce)}function le(){let e=Date.now();let t=(e-ae)/1e3;t=Math.min(t,.016666);ae=e;return t}function de(){let e=Ae(n.clientWidth);let t=Ae(n.clientHeight);if(n.width!==e||n.height!==t){n.width=e;n.height=t;return!0}return!1}function ue(e){se+=e*r.COLOR_UPDATE_SPEED;if(se>=1){se=_e(se,0,1);f.forEach(e=>{e.color=Se()})}}function me(){f.forEach(e=>{if(e.moved){e.moved=!1;ve(e)}})}function he(e){p.disable(p.BLEND);q.bind();p.uniform2f(q.uniforms.texelSize,B.texelSizeX,B.texelSizeY);p.uniform1i(q.uniforms.uVelocity,B.read.attach(0));U(X);K.bind();p.uniform2f(K.uniforms.texelSize,B.texelSizeX,B.texelSizeY);p.uniform1i(K.uniforms.uVelocity,B.read.attach(0));p.uniform1i(K.uniforms.uCurl,X.attach(1));p.uniform1f(K.uniforms.curl,r.CURL);p.uniform1f(K.uniforms.dt,e);U(B.write);B.swap();$.bind();p.uniform2f($.uniforms.texelSize,B.texelSizeX,B.texelSizeY);p.uniform1i($.uniforms.uVelocity,B.read.attach(0));U(M);Y.bind();p.uniform1i(Y.uniforms.uTexture,G.read.attach(0));p.uniform1f(Y.uniforms.value,r.PRESSURE);U(G.write);G.swap();J.bind();p.uniform2f(J.uniforms.texelSize,B.texelSizeX,B.texelSizeY);p.uniform1i(J.uniforms.uDivergence,M.attach(0));for(let n=0;n<r.PRESSURE_ITERATIONS;n++){p.uniform1i(J.uniforms.uPressure,G.read.attach(1));U(G.write);G.swap()}Z.bind();p.uniform2f(Z.uniforms.texelSize,B.texelSizeX,B.texelSizeY);p.uniform1i(Z.uniforms.uPressure,G.read.attach(0));p.uniform1i(Z.uniforms.uVelocity,B.read.attach(1));U(B.write);B.swap();W.bind();p.uniform2f(W.uniforms.texelSize,B.texelSizeX,B.texelSizeY);x.supportLinearFiltering||p.uniform2f(W.uniforms.dyeTexelSize,B.texelSizeX,B.texelSizeY);let t=B.read.attach(0);p.uniform1i(W.uniforms.uVelocity,t);p.uniform1i(W.uniforms.uSource,t);p.uniform1f(W.uniforms.dt,e);p.uniform1f(W.uniforms.dissipation,r.VELOCITY_DISSIPATION);U(B.write);B.swap();x.supportLinearFiltering||p.uniform2f(W.uniforms.dyeTexelSize,O.texelSizeX,O.texelSizeY);p.uniform1i(W.uniforms.uVelocity,B.read.attach(0));p.uniform1i(W.uniforms.uSource,O.read.attach(1));p.uniform1f(W.uniforms.dissipation,r.DENSITY_DISSIPATION);U(O.write);O.swap()}function fe(e){p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);p.enable(p.BLEND);pe(e)}function pe(e){let t=p.drawingBufferWidth;let n=p.drawingBufferHeight;Q.bind();r.SHADING&&p.uniform2f(Q.uniforms.texelSize,1/t,1/n);p.uniform1i(Q.uniforms.uTexture,O.read.attach(0));U(e)}function ve(e){let t=e.deltaX*r.SPLAT_FORCE;let n=e.deltaY*r.SPLAT_FORCE;ge(e.texcoordX,e.texcoordY,t,n,e.color)}function xe(e){const t=Se();t.r*=10;t.g*=10;t.b*=10;let n=10*(Math.random()-.5);let o=30*(Math.random()-.5);ge(e.texcoordX,e.texcoordY,n,o,t)}function ge(e,t,o,i,a){H.bind();p.uniform1i(H.uniforms.uTarget,B.read.attach(0));p.uniform1f(H.uniforms.aspectRatio,n.width/n.height);p.uniform2f(H.uniforms.point,e,t);p.uniform3f(H.uniforms.color,o,i,0);p.uniform1f(H.uniforms.radius,ye(r.SPLAT_RADIUS/100));U(B.write);B.swap();p.uniform1i(H.uniforms.uTarget,O.read.attach(0));p.uniform3f(H.uniforms.color,a.r,a.g,a.b);U(O.write);O.swap()}function ye(e){let t=n.width/n.height;t>1&&(e*=t);return e}function be(e,t,o,r){e.id=t;e.down=!0;e.moved=!1;e.texcoordX=o/n.width;e.texcoordY=1-r/n.height;e.prevTexcoordX=e.texcoordX;e.prevTexcoordY=e.texcoordY;e.deltaX=0;e.deltaY=0;e.color=Se()}function we(e,t,o,r){e.prevTexcoordX=e.texcoordX;e.prevTexcoordY=e.texcoordY;e.texcoordX=t/n.width;e.texcoordY=1-o/n.height;e.deltaX=Te(e.texcoordX-e.prevTexcoordX);e.deltaY=je(e.texcoordY-e.prevTexcoordY);e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0;e.color=r}function Ee(e){e.down=!1}function Te(e){let t=n.width/n.height;t<1&&(e*=t);return e}function je(e){let t=n.width/n.height;t>1&&(e/=t);return e}function Se(){let e=Re(Math.random(),1,1);e.r*=.15;e.g*=.15;e.b*=.15;return e}function Re(e,t,n){let o,r,i,a,s,c,l,d;a=Math.floor(6*e);s=6*e-a;c=n*(1-t);l=n*(1-s*t);d=n*(1-(1-s)*t);switch(a%6){case 0:o=n;r=d;i=c;break;case 1:o=l;r=n;i=c;break;case 2:o=c;r=n;i=d;break;case 3:o=c;r=l;i=n;break;case 4:o=d;r=c;i=n;break;case 5:o=n;r=c;i=l}return{r:o,g:r,b:i}}function _e(e,t,n){return(e-t)%(n-t)+t}function Ne(e){let t=p.drawingBufferWidth/p.drawingBufferHeight;t<1&&(t=1/t);const n=Math.round(e);const o=Math.round(e*t);return p.drawingBufferWidth>p.drawingBufferHeight?{width:o,height:n}:{width:n,height:o}}function Ae(e){const t=window.devicePixelRatio||1;return Math.floor(e*t)}function Le(e){if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return t}window.addEventListener("mousedown",e=>{let t=f[0];be(t,-1,Ae(e.clientX),Ae(e.clientY));xe(t)});document.body.addEventListener("mousemove",function e(t){let n=f[0];let o=Ae(t.clientX);let r=Ae(t.clientY);let i=Se();ce();we(n,o,r,i);document.body.removeEventListener("mousemove",e)});window.addEventListener("mousemove",e=>{let t=f[0];we(t,Ae(e.clientX),Ae(e.clientY),t.color)});document.body.addEventListener("touchstart",function e(t){const n=t.targetTouches;let o=f[0];for(let r=0;r<n.length;r++){let e=Ae(n[r].clientX);let t=Ae(n[r].clientY);ce();be(o,n[r].identifier,e,t)}document.body.removeEventListener("touchstart",e)});window.addEventListener("touchstart",e=>{const t=e.targetTouches;let n=f[0];for(let o=0;o<t.length;o++){let e=Ae(t[o].clientX);let r=Ae(t[o].clientY);be(n,t[o].identifier,e,r)}});window.addEventListener("touchmove",e=>{const t=e.targetTouches;let n=f[0];for(let o=0;o<t.length;o++)we(n,Ae(t[o].clientX),Ae(t[o].clientY),n.color)},!1);window.addEventListener("touchend",e=>{const t=e.changedTouches;let n=f[0];for(let o=0;o<t.length;o++)Ee(n)});ce()},[e,t,n,i,a,s,c,l,d,u,m,h,f,p]);return r.jsx("div",{className:"fixed top-0 left-0 z-50 pointer-events-none w-full h-full",children:r.jsx("canvas",{ref:v,id:"fluid",className:"w-screen h-screen block"})})}const Y=()=>r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-black",children:r.jsxs("div",{className:"relative flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-32 h-32 mb-6",children:[r.jsx("div",{className:"absolute inset-0 border-2 border-gray-700 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-white border-r-white rounded-full animate-spin"}),r.jsx("div",{className:"absolute inset-4 border border-gray-600 rounded-full animate-pulse"}),r.jsx("div",{className:"absolute inset-8 border border-gray-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-white rounded-full animate-pulse"})]}),r.jsx("div",{className:"text-white text-4xl font-bold tracking-wider",children:"CIRCLE"})]})});class H extends i.Component{constructor(e){super(e);n(this,"reportError",(e,t)=>{const n={error:e.toString(),stack:e.stack,componentStack:t.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),retryCount:this.state.retryCount,userId:localStorage.getItem("userId")||"anonymous",sessionId:sessionStorage.getItem("sessionId")||"unknown",viewport:{width:window.innerWidth,height:window.innerHeight},connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null};"undefined"!=typeof window&&void 0!==window.gtag&&window.gtag("event","exception",{description:e.toString(),fatal:!1,custom_map:{error_component:t.componentStack.split("\n")[1]||"unknown",retry_count:this.state.retryCount,user_agent:navigator.userAgent.substring(0,100)}});"undefined"!=typeof window&&void 0!==window.newrelic&&window.newrelic.noticeError(e,n);fetch("/.netlify/functions/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(e=>{this.reportToTelegram(n,e)})});n(this,"reportToTelegram",(e,t=null)=>{const n="8193267768:AAFgL65AXJAwjv5iHCNncDV-QNt6mjReqYo";const o="-4968632931";const r=`\n🚨 Frontend Error Alert\n\nError: ${e.error}\nURL: ${e.url}\nRetry Count: ${e.retryCount}\nUser Agent: ${e.userAgent.substring(0,100)}\nTime: ${e.timestamp}\n\n${t?`\nFallback triggered due to: ${t.message}`:""}\n    `.trim();fetch(`https://api.telegram.org/bot${n}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:o,text:r,parse_mode:"HTML"})}).catch(()=>{const t=JSON.parse(localStorage.getItem("unsentErrors")||"[]");t.push({...e,timestamp:Date.now()});localStorage.setItem("unsentErrors",JSON.stringify(t.slice(-10)))})});n(this,"handleRetry",()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}))});n(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){void 0;this.setState({error:e,errorInfo:t});this.reportError(e,t)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full text-center",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-500 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Что-то пошло не так"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Произошла неожиданная ошибка. Мы уже работаем над её исправлением."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:this.handleRetry,className:"w-full bg-yellow-400 text-black font-semibold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors",disabled:this.state.retryCount>=3,children:this.state.retryCount>=3?"Превышено количество попыток":"Попробовать снова"}),r.jsx("button",{onClick:this.handleReload,className:"w-full bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors",children:"Перезагрузить страницу"}),r.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-transparent border border-gray-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-gray-800 transition-colors",children:"На главную"})]}),!1,r.jsxs("div",{className:"mt-8 text-xs text-gray-500",children:[r.jsx("p",{children:"Если проблема повторяется, свяжитесь с нами:"}),r.jsx("p",{className:"mt-1",children:r.jsx("a",{href:"mailto:info@circleburo.kz",className:"text-yellow-400 hover:text-yellow-300",children:"info@circleburo.kz"})})]})]})}):this.props.children}}const W=({component:e,fallback:t=r.jsx(Y,{})})=>{const[n,i]=o.useState(!1);o.useEffect(()=>{const e=setTimeout(()=>{i(!0)},1e4);return()=>clearTimeout(e)},[]);const a=r.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mb-4",children:r.jsx(Y,{})}),r.jsx("p",{className:"text-yellow-400 mb-4",children:"Загрузка занимает больше времени, чем обычно..."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-400 text-black px-6 py-2 rounded-lg hover:bg-yellow-500 transition-colors",children:"Перезагрузить страницу"})]})});return r.jsx(H,{children:r.jsx(o.Suspense,{fallback:n?a:t,children:r.jsx(e,{})})})};const $=()=>r.jsxs(s,{children:[r.jsx("link",{rel:"preload",href:"/fonts/Montserrat-Regular.woff2",as:"font",type:"font/woff2",crossOrigin:"anonymous"}),r.jsx("link",{rel:"preload",href:"/fonts/Montserrat-Bold.woff2",as:"font",type:"font/woff2",crossOrigin:"anonymous"}),r.jsx("link",{rel:"preload",href:"/img/logo-header.png",as:"image"}),r.jsx("link",{rel:"dns-prefetch",href:"//fonts.googleapis.com"}),r.jsx("link",{rel:"dns-prefetch",href:"//www.googletagmanager.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://www.googletagmanager.com"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),r.jsx("meta",{name:"theme-color",content:"#000000"}),r.jsx("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),r.jsx("meta",{name:"format-detection",content:"telephone=no"})]});const q=()=>{const[e,t]=o.useState(!1);const[n,i]=o.useState(1);const[a,s]=o.useState(!1);o.useEffect(()=>{const e="true"===localStorage.getItem("highContrast");const n=parseFloat(localStorage.getItem("fontSize")||"1");t(e);i(n);e&&document.body.classList.add("high-contrast");document.documentElement.style.fontSize=`${n}rem`},[]);o.useEffect(()=>{const e=e=>{if(e.altKey&&"a"===e.key){e.preventDefault();s(!a)}};document.addEventListener("keydown",e);return()=>document.removeEventListener("keydown",e)},[a]);const c=()=>{const n=!e;t(n);localStorage.setItem("highContrast",n.toString());n?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast")};const l=e=>{const t=Math.max(.8,Math.min(1.4,n+e));i(t);localStorage.setItem("fontSize",t.toString());document.documentElement.style.fontSize=`${t}rem`};const d=()=>{t(!1);i(1);localStorage.removeItem("highContrast");localStorage.removeItem("fontSize");document.body.classList.remove("high-contrast");document.documentElement.style.fontSize="1rem"};return a?r.jsxs(r.Fragment,{children:[r.jsx("style",{jsx:!0,children:`\n        .high-contrast {\n          filter: contrast(150%) brightness(1.2);\n        }\n        .high-contrast img,\n        .high-contrast video {\n          filter: contrast(120%);\n        }\n        .accessibility-panel {\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          background: white;\n          border: 2px solid #000;\n          border-radius: 8px;\n          padding: 16px;\n          z-index: 9999;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          min-width: 250px;\n        }\n        .accessibility-button {\n          background: #0066cc;\n          color: white;\n          border: none;\n          padding: 8px 12px;\n          margin: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n        }\n        .accessibility-button:hover,\n        .accessibility-button:focus {\n          background: #0052a3;\n          outline: 2px solid #004080;\n        }\n        .font-controls {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          margin: 8px 0;\n        }\n      `}),r.jsxs("div",{className:"accessibility-panel",role:"dialog","aria-labelledby":"accessibility-title","aria-describedby":"accessibility-description","aria-modal":"true",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{id:"accessibility-title",className:"font-semibold text-lg",children:"Настройки доступности"}),r.jsx("p",{id:"accessibility-description",className:"sr-only",children:"Панель настроек доступности для улучшения восприятия сайта"}),r.jsx("button",{className:"text-gray-500 hover:text-gray-700 text-xl font-bold",onClick:()=>s(!1),"aria-label":"Закрыть панель",children:"×"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs("button",{className:"accessibility-button w-full",onClick:c,"aria-pressed":e,"aria-describedby":"contrast-description",children:[e?"Отключить":"Включить"," высокий контраст"]}),r.jsx("p",{id:"contrast-description",className:"sr-only",children:e?"Высокий контраст включен":"Включить высокий контраст для лучшей читаемости"})]}),r.jsxs("div",{className:"font-controls",role:"group","aria-labelledby":"font-size-label",children:[r.jsx("span",{id:"font-size-label",className:"text-sm",children:"Размер текста:"}),r.jsx("button",{className:"accessibility-button",onClick:()=>l(-.1),"aria-label":"Уменьшить размер текста",disabled:n<=.8,children:"А-"}),r.jsxs("span",{className:"text-sm px-2","aria-live":"polite","aria-atomic":"true",children:[Math.round(100*n),"%"]}),r.jsx("button",{className:"accessibility-button",onClick:()=>l(.1),"aria-label":"Увеличить размер текста",disabled:n>=1.4,children:"А+"})]}),r.jsx("div",{children:r.jsx("button",{className:"accessibility-button w-full",onClick:d,children:"Сбросить настройки"})}),r.jsxs("div",{className:"text-xs text-gray-600 mt-4",children:[r.jsx("p",{children:"Горячие клавиши:"}),r.jsx("p",{children:"Alt + A - показать/скрыть панель"}),r.jsx("p",{children:"Tab - навигация по элементам"})]})]})]})]}):r.jsx("button",{className:"sr-only focus:not-sr-only fixed top-4 left-4 z-50 bg-blue-600 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>s(!0),"aria-label":"Показать настройки доступности (Alt + A)",children:"Настройки доступности"})};const K=()=>{const e=o.useRef(new Set);const t=o.useRef(new Set);const n=o.useRef(new Set);const r=o.useCallback(()=>{e.current.forEach(e=>{clearTimeout(e)});e.current.clear();t.current.forEach(e=>{clearInterval(e)});t.current.clear();n.current.forEach(e=>{e.signal.aborted||e.abort()});n.current.clear()},[]);const i=o.useCallback((t,n)=>{const o=setTimeout(()=>{e.current.delete(o);t()},n);e.current.add(o);return o},[]);const a=o.useCallback((e,n)=>{const o=setInterval(e,n);t.current.add(o);return o},[]);const s=o.useCallback(()=>{const e=new AbortController;n.current.add(e);return e},[]);o.useEffect(()=>r,[r]);return{safeSetTimeout:i,safeSetInterval:a,createAbortController:s,cleanup:r}};const J=({children:e})=>{const{cleanup:t}=K();const n=o.useRef(null);const r=o.useRef(null);const i=o.useRef(Date.now());const a=o.useRef(!1);const s=o.useCallback(()=>{a.current=document.hidden;if(document.hidden){document.body.classList.add("page-hidden");const e=document.createElement("style");e.id="performance-optimization";e.textContent=`\n        .page-hidden * {\n          animation-play-state: paused !important;\n        }\n        .page-hidden .animate-pulse {\n          animation: none !important;\n        }\n        .page-hidden .animate-spin {\n          animation: none !important;\n        }\n      `;document.head.appendChild(e)}else{document.body.classList.remove("page-hidden");const e=document.getElementById("performance-optimization");e&&document.head.removeChild(e);i.current=Date.now()}},[]);const c=o.useCallback(()=>{i.current=Date.now()},[]);const l=o.useCallback(()=>{const e=navigator.deviceMemory||4;const t=navigator.connection?.effectiveType||"4g";if(e<4||"slow-2g"===t||"2g"===t){document.body.classList.add("low-performance-device");const e=document.createElement("style");e.id="device-optimization";e.textContent=`\n        .low-performance-device * {\n          animation-duration: 0.2s !important;\n          transition-duration: 0.2s !important;\n        }\n        .low-performance-device .complex-animation {\n          animation: none !important;\n        }\n        .low-performance-device .blur-effect {\n          backdrop-filter: none !important;\n          filter: none !important;\n        }\n      `;document.head.appendChild(e)}},[]);const d=o.useCallback(()=>{if("IntersectionObserver"in window){r.current=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("in-viewport"):e.target.classList.remove("in-viewport")})},{rootMargin:"50px",threshold:.1});document.querySelectorAll("section, .lazy-section").forEach(e=>{r.current.observe(e)})}},[]);const u=o.useCallback(()=>{"requestIdleCallback"in window&&(n.current=requestIdleCallback(()=>{document.querySelectorAll(".hidden, .opacity-0:not(.transition)").forEach(e=>{e.getBoundingClientRect().height||(e.style.display="none")});document.querySelectorAll('[style*="animation"]:not(.animating)').forEach(e=>{e.style.animation=""});setTimeout(u,3e4)}))},[]);o.useEffect(()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart","click"];e.forEach(e=>{document.addEventListener(e,c,{passive:!0})});const t=setInterval(()=>{Date.now()-i.current>5*60*1e3&&!a.current?document.body.classList.add("user-inactive"):document.body.classList.remove("user-inactive")},3e4);return()=>{e.forEach(e=>{document.removeEventListener(e,c)});clearInterval(t)}},[c]);o.useEffect(()=>{document.addEventListener("visibilitychange",s);l();d();u();const e=document.createElement("style");e.id="performance-styles";e.textContent=`\n      /* GPU acceleration for better performance */\n      .gpu-accelerated {\n        transform: translateZ(0);\n        backface-visibility: hidden;\n        perspective: 1000px;\n      }\n\n      /* Optimize scrolling */\n      .smooth-scroll {\n        scroll-behavior: smooth;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      /* Optimize animations */\n      .optimized-animation {\n        will-change: transform, opacity;\n        transform: translateZ(0);\n      }\n\n      /* Reduce motion for users who prefer it */\n      @media (prefers-reduced-motion: reduce) {\n        *, *::before, *::after {\n          animation-duration: 0.01ms !important;\n          animation-iteration-count: 1 !important;\n          transition-duration: 0.01ms !important;\n          scroll-behavior: auto !important;\n        }\n      }\n\n      /* Battery optimization */\n      @media (prefers-reduced-motion: reduce), (prefers-color-scheme: dark) {\n        .battery-optimized {\n          filter: brightness(0.8);\n        }\n      }\n\n      /* Inactive state optimizations */\n      .user-inactive .animate-pulse,\n      .user-inactive .animate-spin {\n        animation-play-state: paused;\n      }\n\n      /* Hidden page optimizations */\n      .page-hidden .expensive-animation {\n        animation-play-state: paused;\n      }\n    `;document.head.appendChild(e);return()=>{document.removeEventListener("visibilitychange",s);r.current&&r.current.disconnect();n.current&&cancelIdleCallback(n.current);const e=document.getElementById("performance-styles");e&&document.head.removeChild(e);const o=document.getElementById("device-optimization");o&&document.head.removeChild(o);const i=document.getElementById("performance-optimization");i&&document.head.removeChild(i);t()}},[s,l,d,u,t]);return e};const Z=(e,t)=>o.lazy(()=>e().catch(t=>{void 0;return new Promise((t,n)=>{setTimeout(()=>{e().then(t).catch(e=>{void 0;n(e)})},500)})}));const Q=Z(()=>l(()=>import("./HomePage-BHl4LDSC.js"),1?__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]):void 0),"HomePage");const ee=Z(()=>l(()=>import("./AboutPage-B2vJhWFi.js"),1?__vite__mapDeps([15,3,2,4,5,6,1,7,8,10]):void 0),"AboutPage");const te=Z(()=>l(()=>import("./CasePage-g5_xSxkt.js"),1?__vite__mapDeps([16,3,2,4,5,6,1,7,9,8,10,13]):void 0),"CasePage");const ne=Z(()=>l(()=>import("./Circle-D5ovLlZL.js"),1?__vite__mapDeps([17,3,2,4,5,6,1,7,8,10,11,12,13,14]):void 0),"Circle");const oe=Z(()=>l(()=>import("./Cycle-B0hqE1bp.js"),1?__vite__mapDeps([18,3,2,4,5,6,1,7,8,10,11,12,13,14]):void 0),"Cycle");const re=Z(()=>l(()=>import("./Semicircle-Bl1ibhWc.js"),1?__vite__mapDeps([19,3,2,4,5,6,1,7,8,10,11,12,13,14]):void 0),"Semicircle");const ie=Z(()=>l(()=>import("./AdminPage-DXS5BYSj.js"),1?__vite__mapDeps([20,3,2,21,1,13,10,6]):void 0),"AdminPage");const ae=Z(()=>l(()=>import("./LoginPage-DnkcNOx8.js"),1?__vite__mapDeps([22,3,2,10,6,1,13]):void 0),"LoginPage");const se=Z(()=>l(()=>import("./NotFoundPage-BFJn3nis.js"),1?__vite__mapDeps([23,3,2,6,1,4,5,7,10]):void 0),"NotFoundPage");const ce=({children:e})=>"true"===localStorage.getItem("adminLoggedIn")?e:r.jsx(j,{to:"/login",replace:!0});function le(){const e=g();o.useEffect(()=>{l(async()=>{const{logPageView:e}=await import("./analytics-CzbQfklZ.js");return{logPageView:e}},1?__vite__mapDeps([24,1,2]):void 0).then(({logPageView:e})=>{e()}).catch(e=>{})},[e]);o.useEffect(()=>{(()=>{const t=e.state?.scrollTo||sessionStorage.getItem("scrollToSection");if(t){sessionStorage.removeItem("scrollToSection");l(async()=>{const{scrollToElement:e}=await Promise.resolve().then(()=>M);return{scrollToElement:e}},1?void 0:void 0).then(({scrollToElement:e})=>{setTimeout(()=>{e(t,{maxAttempts:20,delay:150,offset:80})},300)}).catch(e=>{})}})()},[e.pathname,e.state]);const t="/admin"===e.pathname||"/login"===e.pathname;return r.jsx(H,{children:r.jsxs(J,{children:[r.jsx($,{}),r.jsx(V,{}),r.jsx(q,{}),!t&&r.jsx(X,{}),r.jsxs(E,{children:[r.jsx(T,{path:"/",element:r.jsx(W,{component:Q})}),r.jsx(T,{path:"/about",element:r.jsx(W,{component:ee})}),r.jsx(T,{path:"/project",element:r.jsx(W,{component:te})}),r.jsx(T,{path:"/circle",element:r.jsx(W,{component:ne})}),r.jsx(T,{path:"/cycle",element:r.jsx(W,{component:oe})}),r.jsx(T,{path:"/semicircle",element:r.jsx(W,{component:re})}),r.jsx(T,{path:"/en",element:r.jsx(W,{component:Q})}),r.jsx(T,{path:"/en/about",element:r.jsx(W,{component:ee})}),r.jsx(T,{path:"/en/project",element:r.jsx(W,{component:te})}),r.jsx(T,{path:"/en/circle",element:r.jsx(W,{component:ne})}),r.jsx(T,{path:"/en/cycle",element:r.jsx(W,{component:oe})}),r.jsx(T,{path:"/en/semicircle",element:r.jsx(W,{component:re})}),r.jsx(T,{path:"/login",element:r.jsx(W,{component:ae})}),r.jsx(T,{path:"/admin",element:r.jsx(ce,{children:r.jsx(W,{component:ie})})}),r.jsx(T,{path:"*",element:r.jsx(W,{component:se})})]}),!t&&r.jsx(G,{})]})})}function de(){o.useEffect(()=>{l(async()=>{const{initGA:e}=await import("./analytics-CzbQfklZ.js");return{initGA:e}},1?__vite__mapDeps([24,1,2]):void 0).then(({initGA:e})=>{e()}).catch(e=>{})},[]);return r.jsx(w,{children:r.jsx(le,{})})}v.use(S).use(R).use(x).init({fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},backend:{loadPath:"/locales/{{lng}}/translation.json"},interpolation:{escapeValue:!1},react:{useSuspense:!1},supportedLngs:["en","ru"],ns:["translation"],defaultNS:"translation"});function ue(){return"connection"in navigator&&"effectiveType"in navigator.connection?navigator.connection.effectiveType:""}function me(e,t){const n=Object.assign({path:window.location.pathname,referrer:document.referrer,connection:ue()},t);({id:e.id,page:n.path,event_name:e.name,value:e.value.toString(),speed:n.connection});"undefined"!=typeof window&&void 0!==window.gtag&&window.gtag("event",e.name,{event_category:"Web Vitals",event_label:e.id,value:Math.round("CLS"===e.name?1e3*e.value:e.value),non_interaction:!0})}function he(){try{F(me);I(me);k(me);P(me);z&&z(me)}catch(e){void 0}}function fe(){if("PerformanceObserver"in window){try{new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>50&&void 0}).observe({entryTypes:["longtask"]})}catch(e){void 0}try{new PerformanceObserver(e=>{for(const t of e.getEntries())!t.hadRecentInput&&t.value>.1&&void 0}).observe({entryTypes:["layout-shift"]})}catch(e){void 0}}}const pe=()=>{[{href:"/img/hero-poster.webp",as:"image"},{href:"/img/circle-fill.webp",as:"image"}].forEach(e=>{const t=document.createElement("link");t.rel="preload";t.href=e.href;t.as=e.as;e.type&&(t.type=e.type);e.crossorigin&&(t.crossOrigin=e.crossorigin);document.head.appendChild(t)})};const ve=e=>{const t={"/":["/about","/project"],"/about":["/project","/"],"/project":["/circle","/cycle","/semicircle"]}[e];t&&t.forEach(e=>{const t=document.createElement("link");t.rel="prefetch";t.href=e;document.head.appendChild(t)})};const xe=()=>{["https://fonts.googleapis.com","https://fonts.gstatic.com","https://www.google-analytics.com","https://www.googletagmanager.com"].forEach(e=>{const t=document.createElement("link");t.rel="preconnect";t.href=e;t.crossOrigin="anonymous";document.head.appendChild(t)})};const ge=()=>{const e=document.createElement("style");e.innerHTML=`\n    /* Critical CSS for initial render */\n    html { font-family: system-ui, -apple-system, sans-serif; }\n    body { margin: 0; background: #fff; }\n    .loading-screen { \n      position: fixed; \n      inset: 0; \n      display: flex; \n      align-items: center; \n      justify-content: center; \n      background: #fff; \n      z-index: 9999; \n    }\n  `;document.head.appendChild(e)};const ye=e=>{xe();pe();ge();setTimeout(()=>{ve(e)},1e3)};const be=()=>{"requestIdleCallback"in window?requestIdleCallback(()=>{l(async()=>{const{initGA:e}=await import("./analytics-CzbQfklZ.js");return{initGA:e}},1?__vite__mapDeps([24,1,2]):void 0).then(({initGA:e})=>{e()}).catch(e=>{void 0})},{timeout:5e3}):setTimeout(()=>{l(async()=>{const{initGA:e}=await import("./analytics-CzbQfklZ.js");return{initGA:e}},1?__vite__mapDeps([24,1,2]):void 0).then(({initGA:e})=>{e()}).catch(e=>{void 0})},2e3)};if("undefined"!=typeof window)try{ye(window.location.pathname);he();fe();"serviceWorker"in navigator&&1&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{void 0;e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&confirm("Доступно обновление сайта. Обновить сейчас?")&&window.location.reload()})})}).catch(e=>{void 0})});be()}catch(we){void 0}a.createRoot(document.getElementById("root")).render(r.jsx(o.StrictMode,{children:r.jsx(c,{children:r.jsx(de,{})})}));export{X as H,B as n,O as s};
